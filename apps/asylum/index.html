<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>ASYLUM FILES: Institutional Psychiatry, Then and Now</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Inter:wght@400;500&display=swap" rel="stylesheet"/>

<style>
:root {
  --bg: #050607;
  --panel: #0f1418;
  --panel-light: #171e24;
  --panel-grad-a: rgba(0,255,213,0.07);
  --panel-grad-b: rgba(0,0,0,0);
  --accent: #6bfff2;               /* sick hospital teal/fluoro light */
  --accent-soft: rgba(107,255,242,0.18);
  --text: #e9f9ff;                 /* not pure white, slight cyan tint */
  --muted: #6e8b90;                /* cold muted */
  --line: #233238;
  --glow: 0 0 12px rgba(107,255,242,0.7);
  --radius-lg: 18px;
  --radius-md: 10px;
  --radius-sm: 6px;
  --font-head: 'Cinzel', serif;
  --font-body: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

* {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
}

body {
  margin: 0;
  background: radial-gradient(circle at 20% 20%, #0d1a1c 0%, #020404 70%);
  color: var(--text);
  font-family: var(--font-body);
  display: flex;
  flex-direction: row;
  min-height: 100vh;
  overflow-x: hidden;
  overflow-y: auto;
  line-height: 1.45;
  padding-top: 58px;
}

/* TOP NAV BAR */
.top-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: rgba(3,8,10,0.9);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border-bottom: 1px solid rgba(255,255,255,0.07);
  z-index: 9999;
  box-shadow: 0 20px 30px rgba(0,0,0,0.9);
  font-family: var(--font-head);
}

.nav-inner {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 14px 20px;
  padding: 12px 16px;
  max-width: 1400px;
  margin: 0 auto;
}

.nav-brand {
  color: var(--accent);
  font-weight: 600;
  font-size: 0.9rem;
  letter-spacing: 0.05em;
  text-shadow: 0 0 12px rgba(107,255,242,0.7);
  white-space: nowrap;
}

.nav-links {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 12px 16px;
  font-size: 0.7rem;
  letter-spacing: 0.04em;
}

.nav-link {
  color: var(--text);
  text-decoration: none;
  padding-bottom: 2px;
  border-bottom: 2px solid transparent;
}

.nav-link.active {
  color: var(--accent);
  border-bottom-color: var(--accent);
  text-shadow: 0 0 12px rgba(107,255,242,0.7);
}

.nav-link:hover {
  color: var(--accent);
  text-shadow: 0 0 12px rgba(107,255,242,0.7);
}

/* SIDEBAR */
#sidebar {
  width: 270px;
  background: radial-gradient(circle at 0% 0%, #0c2a28 0%, #050707 60%);
  border-right: 1px solid var(--line);
  display: flex;
  flex-direction: column;
  box-shadow: 8px 0 24px rgba(0,0,0,0.8);
  position: relative;
  z-index: 10;
}

.sidebar-header {
  padding: 20px 16px 16px;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  background: linear-gradient(to right, rgba(107,255,242,0.18) 0%, rgba(0,0,0,0) 60%);
}

.app-title {
  font-family: var(--font-head);
  font-size: 1rem;
  font-weight: 600;
  letter-spacing: 0.05em;
  color: var(--text);
  display: flex;
  align-items: baseline;
  gap: 8px;
  text-shadow: 0 0 6px rgba(107,255,242,0.7);
}

.app-sub {
  font-size: 0.7rem;
  font-weight: 400;
  color: var(--muted);
  line-height: 1.4;
  margin-top: 4px;
}

.search-wrap {
  margin-top: 16px;
  position: relative;
}

.search-wrap input {
  width: 100%;
  background: rgba(0,0,0,0.4);
  border: 1px solid var(--line);
  border-radius: var(--radius-md);
  color: var(--text);
  font-size: 0.8rem;
  padding: 9px 10px 9px 30px;
  outline: none;
  box-shadow: inset 0 0 10px rgba(107,255,242,0.25);
}
.search-wrap input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 8px rgba(107,255,242,0.6), inset 0 0 10px rgba(107,255,242,0.35);
}
.search-icon {
  position: absolute;
  left: 9px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.7rem;
  color: var(--accent);
  text-shadow: var(--glow);
  pointer-events: none;
}

/* ROOM LIST */
.room-list {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 8px 0 80px;
  scrollbar-width: thin;
  scrollbar-color: var(--accent) #000;
}
.room-list::-webkit-scrollbar {
  width: 6px;
}
.room-list::-webkit-scrollbar-track {
  background: #000;
}
.room-list::-webkit-scrollbar-thumb {
  background: var(--accent);
  border-radius: 3px;
  box-shadow: 0 0 10px rgba(107,255,242,0.9);
}

.room-item {
  padding: 10px 16px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.03);
  cursor: pointer;
  position: relative;
  transition: background 0.12s;
  display: flex;
  flex-direction: column;
}
.room-item:hover {
  background: rgba(107,255,242,0.07);
}
.room-item.active {
  background: rgba(107,255,242,0.15);
  box-shadow: inset 0 0 12px rgba(107,255,242,0.6);
}

/* We stack name + tag vertically to avoid overflow problems */
.room-line1 {
  display: block;
}

.room-name {
  font-family: var(--font-head);
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text);
  letter-spacing: 0.03em;
  display: block;
  margin-bottom: 6px;
  max-width: 100%;
  word-break: break-word;
}

.room-tag {
  background: var(--accent);
  color: #000;
  font-size: 0.6rem;
  font-weight: 600;
  line-height: 1.2;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  white-space: nowrap;
  box-shadow: 0 0 8px rgba(107,255,242,0.8);
  margin-bottom: 6px;
  display: inline-block;
  max-width: 100%;
}

.room-desc {
  font-size: 0.7rem;
  font-weight: 400;
  color: var(--muted);
  line-height: 1.3;
  word-break: break-word;
}

/* MAIN PANEL */
#main {
  flex: 1;
  background:
    radial-gradient(circle at 80% 20%, rgba(107,255,242,0.08) 0%, rgba(0,0,0,0) 70%),
    radial-gradient(circle at 10% 90%, rgba(0,120,255,0.08) 0%, rgba(0,0,0,0) 70%),
    #050607;
  position: relative;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: thin;
  scrollbar-color: var(--accent) #000;
}
#main::-webkit-scrollbar {
  width: 8px;
}
#main::-webkit-scrollbar-thumb {
  background: var(--accent);
  border-radius: 4px;
  box-shadow: 0 0 10px rgba(107,255,242,0.9);
}

.main-inner {
  max-width: 900px;
  padding: 24px clamp(16px,2vw,24px) 120px;
  margin: 0 auto;
  position: relative;
  color: var(--text);
}

/* HEADER / PROFILE CARD */
#roomHeader {
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: var(--radius-lg);
  box-shadow:
    0 30px 60px rgba(0,0,0,0.9),
    0 0 60px rgba(107,255,242,0.3);
  position: relative;
  padding: 20px 20px 16px;
}

.room-title-row {
  display: flex;
  flex-wrap: wrap;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
}

#roomName {
  font-family: var(--font-head);
  font-size: 1.3rem;
  font-weight: 600;
  letter-spacing: 0.05em;
  color: var(--text);
  text-shadow: 0 0 10px rgba(107,255,242,0.8);
  margin: 0;
  line-height: 1.2;
}

#roomTagline {
  font-size: 0.75rem;
  color: #000;
  background: var(--accent);
  padding: 4px 8px;
  border: 1px solid var(--accent);
  border-radius: var(--radius-sm);
  line-height: 1.3;
  font-weight: 600;
  text-shadow: none;
  box-shadow: 0 0 20px rgba(107,255,242,0.6);
  white-space: nowrap;
  max-width: 100%;
}

#roomContext {
  font-size: 0.7rem;
  color: var(--muted);
  font-style: italic;
  line-height: 1.4;
}

#roomProfile {
  margin-top: 16px;
  font-size: 0.8rem;
  color: var(--text);
  line-height: 1.5;
}

/* SECTIONS / ACCORDION */
.section-card {
  margin-top: 20px;
  background: var(--panel-light);
  border: 1px solid var(--line);
  border-radius: var(--radius-md);
  overflow: hidden;
  box-shadow:
    0 20px 40px rgba(0,0,0,0.8),
    0 0 40px rgba(0,120,255,0.15);
}

.section-header {
  width: 100%;
  background: linear-gradient(to right, rgba(107,255,242,0.15) 0%, rgba(0,0,0,0) 80%);
  color: var(--text);
  border: 0;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  font-family: var(--font-head);
  font-weight: 600;
  font-size: 0.8rem;
  text-align: left;
  line-height: 1.4;
  letter-spacing: 0.05em;
  padding: 14px 16px;
  position: relative;
  cursor: pointer;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  text-shadow: 0 0 8px rgba(107,255,242,0.7);
}
.section-header .label {
  display: flex;
  flex-direction: column;
  gap: 3px;
}
.section-header .title-line {
  display: flex;
  align-items: baseline;
  gap: 8px;
}
.section-header .section-title {
  color: var(--text);
}
.section-header .hint {
  color: var(--muted);
  font-family: var(--font-body);
  font-size: 0.6rem;
  font-weight: 400;
  text-shadow: none;
}
.section-header .chevron {
  font-size: 0.8rem;
  line-height: 1;
  color: var(--accent);
  text-shadow: var(--glow);
  transition: transform 0.15s;
}
.section-card.open .section-header .chevron {
  transform: rotate(90deg);
}

.section-body {
  display: none;
  padding: 16px;
  font-size: 0.8rem;
  color: var(--text);
  line-height: 1.5;
}
.section-card.open .section-body {
  display: block;
  background: radial-gradient(circle at 10% 0%, rgba(107,255,242,0.08) 0%, transparent 70%);
}
.section-body ul {
  margin: 0;
  padding-left: 18px;
}
.section-body li {
  margin-bottom: 10px;
  color: var(--text);
}
.section-body li strong {
  color: var(--accent);
  font-weight: 600;
  text-shadow: var(--glow);
}

/* FOOTER NOTE */
.footer-note {
  margin-top: 32px;
  font-size: 0.65rem;
  line-height: 1.4;
  color: var(--muted);
  text-align: center;
  padding-bottom: 60px;
  max-width: 640px;
  margin-left: auto;
  margin-right: auto;
  border-top: 1px solid rgba(255,255,255,0.05);
  padding-top: 20px;
  font-style: italic;
}

/* RESPONSIVE TWEAKS */
@media (max-width: 750px) {
  #sidebar {
    width: 220px;
  }
  #roomName {
    font-size: 1.1rem;
  }
  #roomTagline {
    font-size: 0.7rem;
  }
}

@media (max-width: 600px) {
  body {
    flex-direction: column;
  }
  #sidebar {
    width: 100%;
    max-height: 40vh;
    border-right: 0;
    border-bottom: 1px solid var(--line);
  }
  #main {
    flex: 1;
  }
  .room-list {
    max-height: calc(40vh - 110px);
  }
  .room-title-row {
    flex-direction: column;
    align-items: flex-start;
  }
  #roomTagline {
    white-space: normal;
  }
}
</style>
</head>
<body>

<!-- TOP NAV -->
<nav class="top-nav">
  <div class="nav-inner">
    <div class="nav-brand">ASYLUM FILES</div>
    <div class="nav-links">
      <a class="nav-link" href="../index.html">Monster Lies</a>
      <a class="nav-link" href="../weaknesses.html">Human Weaknesses</a>
      <a class="nav-link" href="../coverups.html">Erasure Tactics</a>
      <a class="nav-link" href="../survival.html">Hunter Manual</a>
      <a class="nav-link" href="../collaborators.html">Human Traitors</a>
      <a class="nav-link" href="../timeline.html">Timeline</a>
      <a class="nav-link active" href="index.html">Asylum Files</a>
    </div>
  </div>
</nav>

<!-- SIDEBAR -->
<aside id="sidebar">
  <div class="sidebar-header">
    <div class="app-title">
      <span>ASYLUM FILES</span>
      <span style="color:var(--accent);font-size:0.7rem;font-weight:500;text-shadow:var(--glow);">TREATMENT / CONTROL / COMPLIANCE</span>
    </div>
    <div class="app-sub">
      A guided walk through how “help” looked when help meant lock the door, strap the wrists, and call it mercy.
    </div>

    <div class="search-wrap">
      <span class="search-icon">🔍</span>
      <input id="searchInput" type="text" placeholder="Search methods, eras..." />
    </div>
  </div>

  <div id="roomList" class="room-list">
    <!-- filled by JS -->
  </div>
</aside>

<!-- MAIN PANEL -->
<main id="main">
  <div class="main-inner">
    <section id="roomHeader">
      <div class="room-title-row">
        <h1 id="roomName">Loading...</h1>
        <div id="roomTagline"></div>
      </div>
      <div id="roomContext"></div>
      <div id="roomProfile"></div>
    </section>

    <div id="roomSections">
      <!-- accordion sections -->
    </div>

    <div class="footer-note">
      The horror story isn’t “the haunted asylum.” The horror story is how normal people agreed this was fine.
    </div>
  </div>
</main>

<script>
/*
Each room object looks like:
{
  id: 'lobotomy',
  name: 'The Lobotomy Era',
  tagline: 'Calm At Any Cost',
  shortDesc: 'Ice pick to the brain sold as peace.',
  context: '1940s–1950s psychiatric “miracle cure.”',
  profile: 'Narrative, what it was for.',
  promise: [...],
  reality: [...],
  who: [...],
  inside: [...],
  legacy: [...]
}
*/

let openCards = [];
let currentRoomId = null;

const rooms = [
  {
    id: 'bedlam',
    name: 'Bedlam & The First Asylums',
    tagline: 'Locked So The City Could Sleep',
    shortDesc: 'Early “madhouses”: cages, spectators, punishment dressed up as mercy.',
    context: '1700s–1800s and earlier',
    profile:
      'Families, churches, and officials decided some people were “unfit” for public life — too loud, grieving too long, traumatized, angry, inconvenient, disobedient, or just different. The solution was to put them in “care.” Care meant chains in filth while the public stared.',
    promise: [
      'We are removing “dangerous lunatics” from the streets for everyone’s safety.',
      'We will house them, feed them, and keep them contained like “patients,” not criminals.',
      'We are advancing science by observing them.'
    ],
    reality: [
      'These places were money machines. Some literally charged admission for the public to walk through and watch people scream behind bars.',
      'Consent didn’t matter. If a husband, father, priest, or official said “lock her up,” she was gone.',
      'There was almost no treatment plan. The plan was “keep them out of sight so society feels clean.”'
    ],
    who: [
      'Women called “hysterical” for having opinions, anger, or sexual autonomy.',
      'People with neurological differences, seizures, depression, trauma, dementia.',
      'Queer people, disabled people, inconvenient heirs, and anyone embarrassing to a powerful family.'
    ],
    inside: [
      'Overcrowding so bad that people slept in their own waste.',
      'Physical restraints (chains, cuffs, straps) were routine, not emergency use.',
      'Violence from staff and from other inmates was constant. You had no recourse.',
      'You were property. If they decided not to let you out, you never left.'
    ],
    legacy: [
      'The core logic survives: “remove the disruptive person so everyone else can relax.”',
      'People still say “they belong in an institution” when what they mean is “I don’t want to see this anymore.”',
      'The word “asylum” started as “sanctuary.” It turned into “warehouse for the unwanted.”'
    ]
  },

  {
    id: 'hydro',
    name: 'Ice Baths & Hydrotherapy',
    tagline: 'Calm Through Hypothermia',
    shortDesc: 'Strap them in cold water until they stop fighting.',
    context: 'Late 1800s–Early 1900s',
    profile:
      'Doctors called it therapy. Patients called it torture. People were wrapped in freezing wet sheets or submerged in cold tubs for hours “to quiet agitation.” This was sold as humane because there were no bruises like you’d get from a beating.',
    promise: [
      'Water soothes the excited mind.',
      'We are preventing self-harm by holding them in a controlled environment.',
      'It is non-invasive. No cutting, no blood, so it must be kind.'
    ],
    reality: [
      'People were restrained in tubs, sometimes until they begged and choked and shook uncontrollably.',
      'It was punishment dressed as medicine. Be “difficult,” get the bath.',
      'Staff notes would say “patient calmed after treatment.” Translation: exhaustion, shock, and fear.'
    ],
    who: [
      'Anyone labeled “agitated,” “hysterical,” “manic,” “uncooperative,” including teenagers.',
      'Women who cried loudly.',
      'People with trauma responses that made staff uncomfortable.'
    ],
    inside: [
      'You’re freezing, jaw locked, body screaming, and the staff is saying calmly, “this is helping you.”',
      'No ability to say no. Straps on wrists, chest, legs.',
      'Time stretches. Minutes feel like hours because you can’t escape your own panic.'
    ],
    legacy: [
      'The script “This is for your own good, we’re calming you, stop resisting” survives today in restraint language.',
      'It influenced “quiet rooms” and “cool-downs,” which often mean “you are isolated until you comply.”',
      'It taught institutions they could get away with force if they call it de-escalation.'
    ]
  },

  {
    id: 'shock',
    name: 'Electroshock / ECT',
    tagline: 'Obey Or Get Wired',
    shortDesc: 'Electric current to the brain. Sold as cure. Used as threat.',
    context: 'Mid 1900s abuse vs modern clinical use',
    profile:
      'Electroconvulsive Therapy means sending controlled current through the brain to trigger a seizure. Today, in legit hospitals, it’s done under anesthesia and can help with severe depression when nothing else stops a person from dying. In the past, it was also used wide-open as a compliance weapon.',
    promise: [
      'We can “reset” a broken mind.',
      'We can stop suicidal despair.',
      'We can make violent patients safe without knives.'
    ],
    reality: [
      'In early decades, patients were shocked without anesthesia, at high doses, as discipline.',
      'It created terror. People behaved not because they were “cured,” but because they were afraid to be strapped down again.',
      'Memory loss and confusion were common and sometimes permanent.'
    ],
    who: [
      'People who fought staff.',
      'People who yelled.',
      'People with deep depression, psychosis, or suicidality who had literally nowhere else to go.'
    ],
    inside: [
      'The restraint. The rubber bite block. The smell. Other patients watching you get rolled back like a ghost.',
      'Knowing that if you act “out of control,” they can do this again.',
      'Feeling like your thoughts don’t totally belong to you afterward.'
    ],
    legacy: [
      'Modern ECT can legitimately save lives when someone is about to end their own, fast.',
      'But the fear-story of “they’ll shock me if I don’t behave” stuck, and that shadow still scares people out of asking for help.',
      'It proved to the system: if you package pain as medicine, you can call it compassion.'
    ]
  },

  {
    id: 'lobotomy',
    name: 'The Lobotomy Boom',
    tagline: 'Quiet At Any Price',
    shortDesc: 'Ice pick through the eye socket to scramble the frontal lobe.',
    context: '1940s–1950s',
    profile:
      'For over a decade, doctors pushed lobotomy as a miracle. Slide a metal pick behind the eye, sever brain connections, and the “difficult” patient becomes calm. Newspapers called it progress. The patients often lost personality, memory, judgement, and independence permanently.',
    promise: [
      'We have found a cure for violent or distressed minds.',
      'Families will finally have peace.',
      'Your loved one will be calm and easy to care for.'
    ],
    reality: [
      'It wasn’t a cure. It was damage.',
      'People went from screaming and fighting to docile, childlike, blank. Institutions loved it because quiet patients require less staff.',
      'It was done to women whose husbands said they were “too emotional,” to kids considered unruly, and to veterans with trauma.'
    ],
    who: [
      'Women who didn’t conform.',
      'People with psychosis, PTSD, rage, suicidal spirals.',
      'Anyone labeled “disruptive” in an overcrowded ward.'
    ],
    inside: [
      'You go in scared and angry. You come out compliant and dulled.',
      'If your family liked the quiet version of you better, you never got a real choice.',
      'If you hated what you became, too bad. You couldn’t advocate for yourself anymore.'
    ],
    legacy: [
      'We don’t ice-pick brains now. But we do “chemical lobotomy” with heavy sedation.',
      'The underlying message survived: better drugged and manageable than messy and human.',
      'We still praise treatments for how easy they make you to supervise, not just how much they heal you.'
    ]
  },

  {
    id: 'thorazine',
    name: 'Thorazine & The Chemical Straitjacket',
    tagline: 'Sleepy Means Safe (To Staff)',
    shortDesc: 'High-dose tranquilizers to keep you slow, quiet, and non-threatening.',
    context: '1950s–1980s and echoes now',
    profile:
      'Thorazine and similar antipsychotics were hailed as wonder drugs. They did help some people with terrifying hallucinations and violent breaks. They were also abused to sedate entire wards. Patients shuffled, drooled, trembled, and lived behind fog.',
    promise: [
      'This pill will restore order.',
      'You’ll be calm. You’ll stop seeing things.',
      'We can finally discharge patients back to society.'
    ],
    reality: [
      '“Calm” often meant zombified.',
      'Side effects: rigid muscles, shaking, blurred vision, mouth like cotton, sometimes permanent movement disorders.',
      'If you fought the pill, you were labeled noncompliant and punished. Refusal was “proof you’re sick.”'
    ],
    who: [
      'Institutionalized patients with psychosis.',
      'People considered violent or unpredictable.',
      'People with no lawyer, no family, no voice.'
    ],
    inside: [
      'You’re awake, technically. But you’re slowed, muffled, underwater.',
      'You lose the ability to argue for yourself because you can’t think fast enough to argue.',
      'Your silence gets recorded as “tolerating medication well.”'
    ],
    legacy: [
      'Modern psych meds can be lifesaving and humane when they’re chosen with consent and monitored.',
      'But the culture of “chemical restraint as behavior control” never really died.',
      '“Take this to take the edge off” can still mean “take this so you are easier to handle.”'
    ]
  },

  {
    id: 'watch',
    name: 'Suicide Watch & Adolescent Lock Units',
    tagline: 'We’re Watching So You Don’t Die',
    shortDesc: 'Constant observation, no privacy, and you don’t get to leave.',
    context: 'Current model, especially for teens',
    profile:
      'Modern psych wards for suicidal patients often run on tight safety protocols: door checks every few minutes, restricted bathroom access, no shoelaces, no strings, no alone time. This can absolutely keep someone alive in an emergency. It can also feel like jail wrapped in inspirational posters.',
    promise: [
      'We will keep you alive tonight. You will not be alone with your worst thoughts.',
      'We will stabilize you and keep you safe while you’re in crisis.',
      'This is a supportive environment.'
    ],
    reality: [
      'You surrender basic freedom the second you’re admitted.',
      'They decide when you can sleep, shower, make phone calls, even sometimes pee alone.',
      'You share space with other people in full meltdown. Screaming and restraint can happen right in front of you.',
      'If you beg to leave because you’re overwhelmed, that itself gets charted as instability.'
    ],
    who: [
      'Teens who wrote suicide notes.',
      'Adults who admitted intent.',
      'People who scared somebody enough that the system said: “No chances.”'
    ],
    inside: [
      'Lights in the doorway all night. Clipboard checks every 10–15 minutes.',
      'Group therapy even if you hate groups.',
      'You are now a case number in a locked hallway. You don’t control the exit timeline.'
    ],
    legacy: [
      'For some people, this is literally the thing that stopped them from dying that week.',
      'For others, this was trauma they never expected: “getting help” felt like “getting caged.”',
      'Either way, the message from the system is the same one it’s always had: safety on their terms, not yours.'
    ]
  },

  {
    id: 'arkham',
    name: 'Arkham Myth & The Haunted Hospital',
    tagline: 'Blame The Ghost, Not The Policy',
    shortDesc: 'Pop culture turned real abuse into spooky wallpaper.',
    context: 'Fiction vs history',
    profile:
      'Horror adores the asylum: flickering lights, peeling paint, howling patients, sadistic nurses, demonic doctors. That aesthetic lets us say, “That was long ago, that was evil, that was cartoons,” instead of admitting how normal and approved most of it was.',
    promise: [
      'The horror is ghosts and serial killers in abandoned halls.',
      'Only monsters do that kind of abuse.',
      'It’s not like that anymore.'
    ],
    reality: [
      'Most of the worst stuff wasn’t some backwoods dungeon. It was policy, paperwork, medical journals, award-winning doctors.',
      'The public co-signed it. Families asked for it. Courts enforced it.',
      'We hide behind the “haunted asylum” trope so we never have to ask if we’re still okay with the modern version.'
    ],
    who: [
      'Anyone who made the outside world uncomfortable.',
      'Anyone whose pain was louder than society’s patience.',
      'Anyone marked “other,” “broken,” “too much,” “unsafe,” “embarrassing.”'
    ],
    inside: [
      'The scariest part isn’t a ghost at the end of the hall.',
      'It’s realizing everyone around you thinks this is normal.',
      'It’s realizing you don’t get a vote.'
    ],
    legacy: [
      'We still use phrases like “they should be locked up” as if locking a person up is morally neutral.',
      'We pretend abuse is horror-movie rare, instead of something regular people will defend if you call it “treatment.”',
      'The institution keeps evolving its costume: iron bars, ice baths, electrodes, ice picks, pills, observation rooms. Different tools. Same spine.'
    ]
  }
]; // END rooms array


// DOM refs
const roomListEl = document.getElementById('roomList');
const searchInputEl = document.getElementById('searchInput');

const roomNameEl = document.getElementById('roomName');
const roomTaglineEl = document.getElementById('roomTagline');
const roomContextEl = document.getElementById('roomContext');
const roomProfileEl = document.getElementById('roomProfile');
const roomSectionsEl = document.getElementById('roomSections');


/* limit open accordions to max 2 at a time */
function registerOpen(card) {
  if (!openCards.includes(card)) {
    openCards.push(card);
  }
  if (openCards.length > 2) {
    const toClose = openCards.shift();
    if (toClose && toClose !== card) {
      toClose.classList.remove('open');
    }
  }
}

function unregister(card) {
  openCards = openCards.filter(c => c !== card);
}


/* build accordion card */
function buildSectionCard(title, hint, bullets, open=false) {
  const card = document.createElement('div');
  card.className = 'section-card' + (open ? ' open' : '');

  const headerBtn = document.createElement('button');
  headerBtn.className = 'section-header';

  const labelWrap = document.createElement('div');
  labelWrap.className = 'label';

  const titleLine = document.createElement('div');
  titleLine.className = 'title-line';

  const titleSpan = document.createElement('div');
  titleSpan.className = 'section-title';
  titleSpan.textContent = title;

  const hintSpan = document.createElement('div');
  hintSpan.className = 'hint';
  hintSpan.textContent = hint;

  titleLine.appendChild(titleSpan);

  labelWrap.appendChild(titleLine);
  labelWrap.appendChild(hintSpan);

  const chev = document.createElement('div');
  chev.className = 'chevron';
  chev.textContent = '▶';

  headerBtn.appendChild(labelWrap);
  headerBtn.appendChild(chev);

  const bodyDiv = document.createElement('div');
  bodyDiv.className = 'section-body';

  const ul = document.createElement('ul');
  bullets.forEach(b => {
    const li = document.createElement('li');
    li.innerHTML = b.replace(/^([^:]+):/, '<strong>$1:</strong>');
    ul.appendChild(li);
  });
  bodyDiv.appendChild(ul);

  headerBtn.addEventListener('click', () => {
    const isOpen = card.classList.contains('open');
    if (isOpen) {
      card.classList.remove('open');
      unregister(card);
    } else {
      card.classList.add('open');
      registerOpen(card);
    }
  });

  card.appendChild(headerBtn);
  card.appendChild(bodyDiv);

  if (open) {
    registerOpen(card);
  }

  return card;
}


/* render sidebar list */
function renderRoomList(filterText = '') {
  const f = filterText.trim().toLowerCase();
  roomListEl.innerHTML = '';

  rooms
    .filter(r => {
      if (!f) return true;
      const haystack = [
        r.name,
        r.shortDesc,
        r.tagline,
        r.context
      ].join(' ').toLowerCase();
      return haystack.includes(f);
    })
    .forEach(r => {
      const item = document.createElement('div');
      item.className = 'room-item';
      item.setAttribute('data-id', r.id);

      const line1 = document.createElement('div');
      line1.className = 'room-line1';

      const nameSpan = document.createElement('div');
      nameSpan.className = 'room-name';
      nameSpan.textContent = r.name;

      const tagSpan = document.createElement('div');
      tagSpan.className = 'room-tag';
      tagSpan.textContent = r.tagline;

      line1.appendChild(nameSpan);
      line1.appendChild(tagSpan);

      const descDiv = document.createElement('div');
      descDiv.className = 'room-desc';
      descDiv.textContent = r.shortDesc;

      item.appendChild(line1);
      item.appendChild(descDiv);

      item.addEventListener('click', () => {
        showRoom(r.id);
      });

      roomListEl.appendChild(item);
    });

  highlightActive(currentRoomId);
}


/* show a room's details in main panel */
function showRoom(id) {
  const rm = rooms.find(x => x.id === id);
  if (!rm) return;

  currentRoomId = id;

  roomNameEl.textContent = rm.name;
  roomTaglineEl.textContent = rm.tagline;
  roomContextEl.textContent = rm.context;
  roomProfileEl.textContent = rm.profile;

  roomSectionsEl.innerHTML = '';
  openCards = [];

  const sectionsData = [
    {title: 'The Promise', hint: 'What they said this was for', arr: rm.promise || []},
    {title: 'The Reality', hint: 'What it actually did to people', arr: rm.reality || []},
    {title: 'Who They Did It To', hint: 'Who got targeted and why', arr: rm.who || []},
    {title: 'Inside The Room', hint: 'What it felt like to live it', arr: rm.inside || []},
    {title: 'What Still Survives', hint: 'The modern version wearing nicer language', arr: rm.legacy || []},
  ];

  sectionsData.forEach((sectionObj, idx) => {
    if (!sectionObj.arr || sectionObj.arr.length === 0) return;
    const card = buildSectionCard(
      sectionObj.title,
      sectionObj.hint,
      sectionObj.arr,
      (idx === 0 || idx === 1) // open first two by default
    );
    roomSectionsEl.appendChild(card);
  });

  highlightActive(id);

  document.getElementById('main').scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}


/* highlight active sidebar item */
function highlightActive(id) {
  const items = roomListEl.querySelectorAll('.room-item');
  items.forEach(el => {
    if (el.getAttribute('data-id') === id) {
      el.classList.add('active');
    } else {
      el.classList.remove('active');
    }
  });
}


/* search hook */
searchInputEl.addEventListener('input', (e) => {
  renderRoomList(e.target.value);
});


/* INIT */
renderRoomList('');
if (rooms.length > 0) {
  showRoom(rooms[0].id);
}
</script>

</body>
</html>
