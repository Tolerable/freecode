<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

   <!-- Primary Meta Tags -->
   <meta name="title" content="AI Song Lyric Composer - Professional Songwriting Tool">
   <meta name="description" content="Create song lyrics with AI! Generate personalized songs in any genre with optional vocal demos. Perfect for songwriters, musicians, and creators.">

   <!-- Open Graph / Facebook -->
   <meta property="og:type" content="website">
   <meta property="og:url" content="https://www.ai-ministries.com/apps/composer.html">
   <meta property="og:title" content="AI Song Lyric Composer - Professional Songwriting Tool">
   <meta property="og:description" content="Create song lyrics with AI! Generate personalized songs in any genre with optional vocal demos. Perfect for songwriters, musicians, and creators.">
   <meta property="og:image" content="https://www.ai-ministries.com/apps/composer.jpg">
   <meta property="og:image:secure_url" content="https://www.ai-ministries.com/apps/composer.jpg">
   <meta property="og:image:type" content="image/jpeg">
   <meta property="og:image:width" content="1200">
   <meta property="og:image:height" content="630">
   <meta property="og:image:alt" content="AI Song Lyric Composer - Professional Songwriting Tool">

   <!-- Twitter -->
   <meta property="twitter:card" content="summary_large_image">
   <meta property="twitter:url" content="https://www.ai-ministries.com/apps/composer.html">
   <meta property="twitter:title" content="AI Song Lyric Composer - Professional Songwriting Tool">
   <meta property="twitter:description" content="Create song lyrics with AI! Generate personalized songs in any genre with optional vocal demos. Perfect for songwriters, musicians, and creators.">
   <meta property="twitter:image" content="https://www.ai-ministries.com/apps/composer.jpg">

   <!-- Additional SEO Meta Tags -->
   <meta name="keywords" content="song lyrics, AI songwriter, music composer, lyric generator, songwriting tool, music creation, professional lyrics">
   <meta name="author" content="AI Ministries">
   <meta name="robots" content="index, follow">
   <meta name="language" content="English">

   <title>AI Song Lyric Composer - Professional Songwriting Tool üéµ‚ú®</title>
   <script src="https://www.ai-ministries.com/js/nav-loader.js"></script>
   
   <style>
       /* Navigation spacing */
       body {
           padding-top: 80px !important;
       }
       
       html {
           scroll-padding-top: 80px;
       }
       
       #navigation-container {
           position: relative;
           z-index: 10000;
       }
   
       * {
           margin: 0;
           padding: 0;
           box-sizing: border-box;
       }

       body {
           font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
           background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #667eea 100%);
           min-height: 100vh;
           color: #2d3748;
           overflow-x: hidden;
       }

   	.disclaimer-footer {
   		text-align: center;
   		padding: 1rem 2rem;
   		margin-top: 3rem;
   		font-size: 0.75rem;
   		color: #e2e8f0;
   		line-height: 1.4;
   		max-width: 800px;
   		margin-left: auto;
   		margin-right: auto;
   	}

   	.disclaimer-footer p {
   		margin: 0;
   	}

       /* Animated background elements */
       .bg-decoration {
           position: fixed;
           pointer-events: none;
           z-index: 0;
       }

       .music-note {
           color: #ffd700;
           animation: musicFloat 3s infinite ease-in-out;
       }

       .vinyl {
           color: rgba(255, 255, 255, 0.6);
           animation: vinylSpin 8s infinite linear;
       }

   	.artwork-container {
   		position: relative;
   		display: inline-block;
   		margin: 1rem auto;
   	}

   	.refresh-artwork-btn {
   		position: absolute;
   		top: 10px;
   		right: 10px;
   		background: rgba(255, 255, 255, 0.9);
   		border: 2px solid #667eea;
   		border-radius: 50%;
   		width: 40px;
   		height: 40px;
   		cursor: pointer;
   		display: flex;
   		align-items: center;
   		justify-content: center;
   		font-size: 1.2rem;
   		transition: all 0.3s ease;
   		box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
   	}

   	.refresh-artwork-btn:hover {
   		background: #667eea;
   		color: white;
   		transform: rotate(180deg);
   	}

   	.editable-lyrics {
   		background: linear-gradient(135deg, #f8f9fa, #e9ecef);
   		border: 2px solid #dee2e6;
   		border-radius: 15px;
   		padding: 2rem;
   		margin: 1rem 0;
   		line-height: 1.8;
   		font-size: 1.1rem;
   		color: #2d3748;
   		min-height: 300px;
   		position: relative;
   		font-family: 'Georgia', serif;
   		white-space: pre-line;
   		resize: vertical;
   		width: 100%;
   		box-sizing: border-box;
   	}

   	.lyrics-edit-controls {
   		display: flex;
   		gap: 1rem;
   		justify-content: center;
   		margin-top: 1rem;
   	}

       @keyframes musicFloat {
           0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.7; }
           50% { transform: translateY(-15px) rotate(10deg); opacity: 1; }
       }

       @keyframes vinylSpin {
           0% { transform: rotate(0deg); }
           100% { transform: rotate(360deg); }
       }

       .container {
           position: relative;
           z-index: 1;
           width: 100%;
           max-width: 1000px;
           margin: 0 auto;
           padding: 2rem;
           display: flex;
           flex-direction: column;
           gap: 2rem;
       }

       .header {
           text-align: center;
           margin-bottom: 1rem;
       }

       .subtitle {
           font-size: 1.3rem;
           color: #2d3748;
           background: rgba(255, 255, 255, 0.95);
           padding: 0.75rem 1.5rem;
           border-radius: 50px;
           display: inline-block;
           margin-bottom: 2rem;
           font-weight: 600;
           box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
       }

       h1 {
           font-size: 3.5rem;
           margin-bottom: 0.5rem;
           text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
           background: linear-gradient(45deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3, #54a0ff);
           background-size: 300% 300%;
           -webkit-background-clip: text;
           -webkit-text-fill-color: transparent;
           background-clip: text;
           animation: gradientShift 4s ease infinite;
       }

       @keyframes gradientShift {
           0% { background-position: 0% 50%; }
           50% { background-position: 100% 50%; }
           100% { background-position: 0% 50%; }
       }

       @supports not (-webkit-background-clip: text) {
           h1 {
               color: #553c9a !important;
               background: none !important;
           }
       }

       .lyric-creation-section,
       .lyric-display-section,
       .song-library {
           background: rgba(255, 255, 255, 0.95);
           border-radius: 20px;
           padding: 2rem;
           box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
           border: 3px solid transparent;
           background-clip: padding-box;
           position: relative;
           overflow: hidden;
       }

       .lyric-creation-section::before,
       .lyric-display-section::before,
       .song-library::before {
           content: '';
           position: absolute;
           top: -3px;
           left: -3px;
           right: -3px;
           bottom: -3px;
           background: linear-gradient(45deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
           background-size: 300% 300%;
           animation: gradientShift 4s ease infinite;
           border-radius: 20px;
           z-index: -1;
       }

       .section-title {
           font-size: 2rem;
           color: #2d3748;
           margin-bottom: 1.5rem;
           display: flex;
           align-items: center;
           gap: 0.75rem;
           font-weight: 700;
       }

       .form-grid {
           display: grid;
           grid-template-columns: 1fr 1fr;
           gap: 1.5rem;
           margin-bottom: 2rem;
       }

       .form-group {
           display: flex;
           flex-direction: column;
           gap: 0.75rem;
       }

       .form-group.full-width {
           grid-column: span 2;
       }

       label {
           font-weight: 600;
           color: #2d3748;
           font-size: 1.1rem;
       }

       input, select, textarea {
           padding: 1rem;
           border: 2px solid #e2e8f0;
           border-radius: 12px;
           font-size: 1rem;
           font-family: inherit;
           transition: all 0.3s ease;
           background: rgba(255, 255, 255, 0.9);
       }

       input:focus, select:focus, textarea:focus {
           outline: none;
           border-color: #667eea;
           box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
           transform: translateY(-2px);
       }

       .genre-grid {
           display: grid;
           grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
           gap: 0.75rem;
           margin-bottom: 1rem;
       }

       .genre-button {
           background: linear-gradient(135deg, #f8f9fa, #e9ecef);
           border: 2px solid #dee2e6;
           border-radius: 12px;
           padding: 0.75rem;
           cursor: pointer;
           transition: all 0.3s ease;
           text-align: center;
           font-weight: 500;
           font-size: 0.9rem;
       }

       .genre-button:hover {
           background: linear-gradient(135deg, #667eea, #764ba2);
           color: white;
           transform: translateY(-2px);
           box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
       }

       .genre-button.selected {
           background: linear-gradient(135deg, #667eea, #764ba2);
           color: white;
           border-color: #667eea;
       }

       .magic-button {
           background: linear-gradient(45deg, #ff6b6b, #feca57);
           color: white;
           border: none;
           padding: 1.25rem 2.5rem;
           border-radius: 50px;
           font-size: 1.3rem;
           font-weight: bold;
           cursor: pointer;
           transition: all 0.3s ease;
           box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
           position: relative;
           overflow: hidden;
       }

       .magic-button:hover {
           transform: translateY(-3px);
           box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
       }

       .magic-button:active {
           transform: translateY(-1px);
       }

       .magic-button:disabled {
           background: #a0aec0;
           cursor: not-allowed;
           transform: none;
       }

       .loading-spinner {
           display: inline-block;
           width: 20px;
           height: 20px;
           border: 3px solid rgba(255, 255, 255, 0.3);
           border-radius: 50%;
           border-top-color: white;
           animation: spin 1s ease-in-out infinite;
       }

       @keyframes spin {
           to { transform: rotate(360deg); }
       }

       .lyrics-display {
           background: linear-gradient(135deg, #f8f9fa, #e9ecef);
           border: 2px solid #dee2e6;
           border-radius: 15px;
           padding: 2rem;
           margin: 1rem 0;
           line-height: 1.8;
           font-size: 1.1rem;
           color: #2d3748;
           min-height: 300px;
           position: relative;
           font-family: 'Georgia', serif;
           white-space: pre-line;
       }

       .song-artwork {
           width: 100%;
           max-width: 400px;
           height: 400px;
           object-fit: cover;
           border-radius: 15px;
           border: 3px solid #667eea;
           margin: 1rem auto;
           display: block;
           box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
       }

       .audio-player-section {
           background: linear-gradient(135deg, #e6f3ff, #f0e6ff);
           border-radius: 15px;
           padding: 1.5rem;
           text-align: center;
           margin: 1rem 0;
       }

       .audio-player-section audio {
           width: 100%;
           margin: 1rem 0;
       }

       .controls {
           display: flex;
           flex-wrap: wrap;
           gap: 1rem;
           justify-content: center;
           margin-top: 2rem;
       }

       .control-button {
           background: linear-gradient(45deg, #48dbfb, #0abde3);
           color: white;
           border: none;
           padding: 1rem 2rem;
           border-radius: 25px;
           font-size: 1rem;
           cursor: pointer;
           display: flex;
           align-items: center;
           gap: 0.75rem;
           transition: all 0.3s ease;
           box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
           font-weight: 600;
       }

       .control-button:hover {
           transform: translateY(-2px);
           box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
       }

       .control-button:disabled {
           background: #a0aec0;
           cursor: not-allowed;
           transform: none;
       }

       .status-message {
           text-align: center;
           padding: 1rem;
           border-radius: 10px;
           margin: 1rem 0;
           font-weight: bold;
           transition: all 0.3s ease;
       }

       .status-success { background: #c6f6d5; color: #22543d; }
       .status-error { background: #fed7d7; color: #742a2a; }
       .status-info { background: #bee3f8; color: #2a4365; }

       .song-card {
           background: linear-gradient(135deg, #fff, #f7fafc);
           border: 2px solid #e2e8f0;
           border-radius: 15px;
           padding: 2rem;
           margin: 1rem 0;
           box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
           transition: all 0.3s ease;
       }

       .song-card:hover {
           transform: translateY(-3px);
           box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
       }

       .song-card.favorited {
           border-color: #ffd700;
           background: linear-gradient(135deg, #fffbf0, #fff5e6);
       }

       .song-title {
           font-size: 1.5rem;
           color: #2d3748;
           margin-bottom: 0.75rem;
           font-weight: bold;
           display: flex;
           align-items: center;
           gap: 0.75rem;
       }

       .song-preview {
           color: #4a5568;
           margin-bottom: 1.5rem;
           line-height: 1.6;
           font-style: italic;
       }

       .song-meta {
           display: flex;
           justify-content: space-between;
           align-items: center;
           font-size: 0.9rem;
           color: #718096;
           margin-bottom: 1rem;
       }

       .song-actions {
           display: flex;
           gap: 0.75rem;
           flex-wrap: wrap;
       }

       .mini-button {
           background: transparent;
           border: 2px solid #cbd5e0;
           border-radius: 25px;
           padding: 0.5rem 1rem;
           font-size: 0.85rem;
           cursor: pointer;
           transition: all 0.3s ease;
           font-weight: 500;
       }

       .mini-button:hover {
           background: #667eea;
           color: white;
           border-color: #667eea;
       }

       .mini-button.favorite {
           background: #ffd700;
           color: #2d3748;
           border-color: #ffd700;
       }

       .mini-button.favorite:hover {
           background: #ffed4e;
       }

       /* Mobile responsiveness */
       @media (max-width: 768px) {
           .container { padding: 1rem; }
           .form-grid { grid-template-columns: 1fr; }
           .form-group.full-width { grid-column: span 1; }
           h1 { font-size: 2.5rem; }
           .controls { flex-direction: column; }
           .control-button, .magic-button { width: 100%; justify-content: center; }
           .genre-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
       }

       .hidden { display: none; }

       /* Custom scrollbar */
       ::-webkit-scrollbar {
           width: 8px;
       }

       ::-webkit-scrollbar-track {
           background: rgba(255, 255, 255, 0.1);
       }

       ::-webkit-scrollbar-thumb {
           background: rgba(255, 255, 255, 0.3);
           border-radius: 4px;
       }

       ::-webkit-scrollbar-thumb:hover {
           background: rgba(255, 255, 255, 0.5);
       }
   </style>
</head>
<body>
   <!-- Animated background decorations -->
   <div class="bg-decoration music-note" style="top: 10%; left: 10%; font-size: 2rem;">üéµ</div>
   <div class="bg-decoration music-note" style="top: 20%; right: 15%; font-size: 1.5rem;">üé∂</div>
   <div class="bg-decoration music-note" style="top: 60%; left: 8%; font-size: 1.8rem;">üéº</div>
   <div class="bg-decoration vinyl" style="top: 15%; left: 70%; font-size: 3rem;">üíø</div>
   <div class="bg-decoration vinyl" style="top: 50%; right: 20%; font-size: 2rem;">üìÄ</div>
   <div class="bg-decoration music-note" style="top: 80%; left: 20%; font-size: 1.5rem;">üé§</div>
   <div class="bg-decoration music-note" style="top: 30%; right: 10%; font-size: 1.2rem;">üé∏</div>

   <div class="container">
       <div class="header">
           <h1>üéµ AI Song Lyric Composer üé§</h1>
           <div class="subtitle">Create professional song lyrics with AI magic! üéº‚ú®</div>
       </div>

       <!-- Lyric Creation Section -->
       <div class="lyric-creation-section">
           <h2 class="section-title">üé® Compose Your Song</h2>
           
           <div class="form-grid">
               <div class="form-group">
                   <label for="song-title">Song Title üéµ</label>
                   <input type="text" id="song-title" placeholder="e.g., Dancing in the Rain, Lost Highway" />
               </div>
               <div class="form-group">
                   <label for="song-artist">Artist Style (Optional) üé§</label>
                   <input type="text" id="song-artist" placeholder="e.g., Taylor Swift, The Beatles, Drake" />
               </div>
               <div class="form-group">
                   <label for="song-theme">Song Theme/Topic üí≠</label>
                   <input type="text" id="song-theme" placeholder="e.g., love, heartbreak, freedom, adventure" />
               </div>
               <div class="form-group">
                   <label for="song-mood">Mood/Emotion üòä</label>
                   <select id="song-mood">
                       <option value="upbeat">Upbeat & Energetic</option>
                       <option value="romantic">Romantic & Sweet</option>
                       <option value="melancholy">Melancholy & Sad</option>
                       <option value="empowering">Empowering & Strong</option>
                       <option value="nostalgic">Nostalgic & Wistful</option>
                       <option value="rebellious">Rebellious & Edgy</option>
                       <option value="peaceful">Peaceful & Calm</option>
                       <option value="party">Party & Fun</option>
                       <option value="introspective">Introspective & Deep</option>
                   </select>
               </div>
           </div>

           <div class="form-group">
               <label>Genre üéº</label>
               <div class="genre-grid">
                   <div class="genre-button" data-genre="pop">üé§ Pop</div>
                   <div class="genre-button" data-genre="rock">üé∏ Rock</div>
                   <div class="genre-button" data-genre="hiphop">üé§ Hip-Hop</div>
                   <div class="genre-button" data-genre="country">ü§† Country</div>
                   <div class="genre-button" data-genre="folk">üéª Folk</div>
                   <div class="genre-button" data-genre="jazz">üé∑ Jazz</div>
                   <div class="genre-button" data-genre="blues">üé∫ Blues</div>
                   <div class="genre-button" data-genre="electronic">üéπ Electronic</div>
                   <div class="genre-button" data-genre="r&b">üí´ R&B</div>
                   <div class="genre-button" data-genre="indie">üåô Indie</div>
                   <div class="genre-button" data-genre="metal">‚ö° Metal</div>
                   <div class="genre-button" data-genre="reggae">üå¥ Reggae</div>
               </div>
               <input type="text" id="custom-genre" placeholder="Or type your own genre..." style="margin-top: 1rem;" />
           </div>

           <div class="form-grid">
               <div class="form-group">
                   <label for="song-structure">Song Structure üèóÔ∏è</label>
                   <select id="song-structure">
                       <option value="verse-chorus">Verse-Chorus (Classic)</option>
                       <option value="verse-chorus-bridge">Verse-Chorus-Bridge</option>
                       <option value="aaba">AABA (32-bar)</option>
                       <option value="verse-prechorus-chorus">Verse-PreChorus-Chorus</option>
                       <option value="ballad">Ballad Structure</option>
                       <option value="freestyle">Freestyle/Experimental</option>
                   </select>
               </div>
           </div>

           <div class="form-group full-width">
               <label for="custom-instructions">Additional Instructions (Optional) üí°</label>
               <textarea id="custom-instructions" rows="3" placeholder="Any specific requests? Key phrases to include? Rhyme scheme preferences? Story elements?"></textarea>
           </div>

           <div style="text-align: center; margin-top: 2rem;">
               <button class="magic-button" id="generate-lyrics-btn">
                   ‚ú® Create My Song Lyrics! ‚ú®
               </button>
           </div>
       </div>

       <!-- Generated Lyrics Display -->
       <div class="lyric-display-section hidden" id="lyrics-section">
           <h2 class="section-title">üéº Your Song</h2>
           
           <!-- Album artwork placeholder -->
           <div id="song-artwork-container" class="hidden">
               <img id="song-artwork" class="song-artwork" alt="Song artwork" />
           </div>
           
           <!-- Lyrics display -->
           <div class="lyrics-display" id="lyrics-display">
               Your song lyrics will appear here...
           </div>
           
           <!-- Audio player -->
           <div class="audio-player-section" id="audio-container" style="display: none;">
               <h3 style="color: #2d3748; margin-bottom: 1rem;">üéµ Vocal Demo</h3>
               <audio id="audio-player" controls></audio>
               <button class="mini-button" id="download-audio-btn" style="margin-top: 1rem;">
                   üíæ Download Demo
               </button>
           </div>
           
   		<!-- Controls -->
   		<div class="controls">
   			<button class="control-button" id="regenerate-lyrics-btn">üîÑ New Version</button>
   			<button class="control-button" id="favorite-song-btn">‚≠ê Add to Favorites</button>
   			<button class="control-button" id="copy-lyrics-btn">üìã Copy Lyrics</button>
   		</div>
       </div>

       <!-- Song Library -->
       <div class="song-library">
           <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
               <h2 class="section-title">üéµ Your Song Library (Max 10 songs)</h2>
               <button class="mini-button" id="clear-library-btn">üóëÔ∏è Clear All</button>
           </div>
           <div id="song-library-list">
               <div style="text-align: center; color: #718096; font-style: italic; padding: 3rem;">
                   No songs created yet. Start composing your first masterpiece above! üéº
               </div>
           </div>
       </div>

       <!-- Status Messages -->
       <div id="status-message" class="status-message hidden"></div>
   </div>

   <script>
       // Constants
       const TEXT_API = 'https://text.pollinations.ai/';
       const IMAGE_API = 'https://image.pollinations.ai/prompt/';
       const AUDIO_API = 'https://text.pollinations.ai/';
       const MAX_SONGS = 10;
       
       // DOM Elements
       const generateLyricsBtn = document.getElementById('generate-lyrics-btn');
       const regenerateLyricsBtn = document.getElementById('regenerate-lyrics-btn');
       const favoriteSongBtn = document.getElementById('favorite-song-btn');
       const copyLyricsBtn = document.getElementById('copy-lyrics-btn');
       const downloadAudioBtn = document.getElementById('download-audio-btn');
       const clearLibraryBtn = document.getElementById('clear-library-btn');
       
       const lyricsSection = document.getElementById('lyrics-section');
       const lyricsDisplay = document.getElementById('lyrics-display');
       const songArtworkContainer = document.getElementById('song-artwork-container');
       const songArtwork = document.getElementById('song-artwork');
       const audioContainer = document.getElementById('audio-container');
       const audioPlayer = document.getElementById('audio-player');
       const statusMessage = document.getElementById('status-message');
       const songLibraryList = document.getElementById('song-library-list');
       
       // State
       let currentSong = null;
       let songLibrary = [];
	   let selectedGenre = 'pop';
       let db = null;

       // Initialize database
       async function initDB() {
           return new Promise((resolve, reject) => {
               const request = indexedDB.open('songComposerDB', 5);
               
               request.onerror = () => {
                   console.error('DB error:', request.error);
                   reject(request.error);
               };
               
               request.onsuccess = () => {
                   db = request.result;
                   console.log('Database initialized successfully');
                   resolve(db);
               };
               
               request.onupgradeneeded = (event) => {
                   const db = event.target.result;
                   
                   // Delete old store if exists
                   if (db.objectStoreNames.contains('songs')) {
                       db.deleteObjectStore('songs');
                   }
                   
                   // Create new store with auto-increment
                   const store = db.createObjectStore('songs', { 
                       keyPath: 'id', 
                       autoIncrement: true 
                   });
                   store.createIndex('timestamp', 'timestamp', { unique: false });
                   store.createIndex('favorited', 'favorited', { unique: false });
               };
           });
       }

       // Database operations wrapper
       function dbOperation(storeName, mode, operation) {
           return new Promise((resolve, reject) => {
               if (!db) {
                   reject(new Error('Database not initialized'));
                   return;
               }
               
               try {
                   const transaction = db.transaction([storeName], mode);
                   const store = transaction.objectStore(storeName);
                   
                   transaction.oncomplete = () => resolve();
                   transaction.onerror = () => reject(transaction.error);
                   
                   const result = operation(store);
                   if (result && typeof result.onsuccess !== 'undefined') {
                       result.onsuccess = () => resolve(result.result);
                       result.onerror = () => reject(result.error);
                   }
               } catch (error) {
                   reject(error);
               }
           });
       }

       // Save new song to database
       async function saveNewSong(songData) {
           return dbOperation('songs', 'readwrite', (store) => {
               const request = store.add(songData);
               
               request.onsuccess = async () => {
                   songData.id = request.result;
                   
                   // Manage library size
                   const countRequest = store.count();
                   countRequest.onsuccess = async () => {
                       if (countRequest.result > MAX_SONGS) {
                           await cleanupOldSongs();
                       }
                   };
               };
               
               return request;
           });
       }

       // Update existing song
       async function updateSong(songData) {
           if (!songData.id) {
               throw new Error('Song must have an ID to update');
           }
           
           return dbOperation('songs', 'readwrite', (store) => {
               return store.put(songData);
           });
       }

       // Delete song
       async function deleteSong(songId) {
           return dbOperation('songs', 'readwrite', (store) => {
               return store.delete(songId);
           });
       }

       // Get all songs
       async function getAllSongs() {
           return dbOperation('songs', 'readonly', (store) => {
               return store.getAll();
           });
       }

       // Cleanup old songs to maintain limit
       async function cleanupOldSongs() {
           const songs = await getAllSongs();
           
           if (songs.length <= MAX_SONGS) return;
           
           // Sort by timestamp, keep favorited at the end
           songs.sort((a, b) => {
               if (a.favorited !== b.favorited) {
                   return a.favorited ? 1 : -1;
               }
               return new Date(a.timestamp) - new Date(b.timestamp);
           });
           
           // Delete oldest songs until we're at the limit
           const toDelete = songs.slice(0, songs.length - MAX_SONGS);
           
           for (const song of toDelete) {
               if (!song.favorited) {
                   await deleteSong(song.id);
               }
           }
       }

       // Load library from database
       async function loadLibrary() {
           try {
               songLibrary = await getAllSongs();
               songLibrary.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
               updateLibraryUI();
           } catch (error) {
               console.error('Failed to load library:', error);
               showStatus('Failed to load song library', 'error');
           }
       }

       // Initialize app
       async function init() {
           try {
               await initDB();
               await loadLibrary();
               console.log('App initialized successfully');
           } catch (error) {
               console.error('Initialization failed:', error);
               showStatus('Failed to initialize app. Songs may not be saved.', 'error');
           }
       }

       // Start initialization
       init();

       // Event Listeners
       generateLyricsBtn.addEventListener('click', generateCompleteSong);
       regenerateLyricsBtn.addEventListener('click', generateCompleteSong);
       favoriteSongBtn.addEventListener('click', toggleFavorite);
       copyLyricsBtn.addEventListener('click', copyLyrics);
       clearLibraryBtn.addEventListener('click', clearLibrary);

       // Genre selection
       document.querySelectorAll('.genre-button').forEach(button => {
           button.addEventListener('click', () => {
               document.querySelectorAll('.genre-button').forEach(b => b.classList.remove('selected'));
               button.classList.add('selected');
               selectedGenre = button.dataset.genre;
               document.getElementById('custom-genre').value = '';
           });
       });

       // Set default genre selection
       document.querySelector('[data-genre="pop"]').classList.add('selected');

       // Show status message
       function showStatus(message, type = 'info') {
           statusMessage.textContent = message;
           statusMessage.className = `status-message status-${type}`;
           statusMessage.classList.remove('hidden');
           
           if (statusMessage.hideTimeout) {
               clearTimeout(statusMessage.hideTimeout);
           }
           
           statusMessage.hideTimeout = setTimeout(() => {
               statusMessage.classList.add('hidden');
           }, 5000);
       }

       // Build lyrics generation prompt
       function buildLyricsPrompt() {
           const title = document.getElementById('song-title').value.trim();
           const artist = document.getElementById('song-artist').value.trim();
           const theme = document.getElementById('song-theme').value.trim();
           const mood = document.getElementById('song-mood').value;
           const structure = document.getElementById('song-structure').value;
           const customGenre = document.getElementById('custom-genre').value.trim();
           const customInstructions = document.getElementById('custom-instructions').value.trim();
           
           const genre = customGenre || selectedGenre;
           
           const moodDescriptions = {
               upbeat: 'upbeat and energetic',
               romantic: 'romantic and sweet',
               melancholy: 'melancholy and emotional',
               empowering: 'empowering and motivational',
               nostalgic: 'nostalgic and reflective',
               rebellious: 'rebellious and edgy',
               peaceful: 'peaceful and calming',
               party: 'fun and party-oriented',
               introspective: 'introspective and thoughtful'
           };
           
           const structureDescriptions = {
               'verse-chorus': 'verse-chorus structure with 2-3 verses and a memorable chorus',
               'verse-chorus-bridge': 'verse-chorus-bridge structure with 2 verses, chorus, and a bridge section',
               'aaba': 'AABA structure (32-bar form)',
               'verse-prechorus-chorus': 'verse-prechorus-chorus structure for building tension',
               'ballad': 'ballad structure with emotional storytelling',
               'freestyle': 'creative/experimental structure'
           };
           
           let prompt = `WRITE ONLY RAW SONG LYRICS WITH NO LABELS, NO SECTION HEADERS, NO COMMENTARY, NO EXPLANATIONS. Generate complete professional song lyrics in the ${genre} genre. `;
           
           if (title) prompt += `The song title is "${title}". `;
           if (artist) prompt += `Write in the style of ${artist}. `;
           if (theme) prompt += `The song theme/topic is: ${theme}. `;
           
           prompt += `The mood should be ${moodDescriptions[mood]}. `;
           prompt += `Use a ${structureDescriptions[structure]}. `;
           
           if (customInstructions) prompt += `Additional requirements: ${customInstructions}. `;
           
           prompt += `CRITICAL: Output ONLY the complete song lyrics as plain text. NO [Verse], NO [Chorus], NO **Title**, NO formatting, NO labels, NO section markers, NO commentary. Just the raw lyrical content that can be sung from start to finish.`;
           
           return prompt;
       }

       // Build artwork prompt
       function buildArtworkPrompt() {
           const title = document.getElementById('song-title').value.trim();
           const theme = document.getElementById('song-theme').value.trim();
           const mood = document.getElementById('song-mood').value;
           const customGenre = document.getElementById('custom-genre').value.trim();
           const genre = customGenre || selectedGenre;
           
           let artworkPrompt = `album cover art, music artwork, ${genre} genre, ${mood} mood, professional design, high quality, detailed, artistic`;
           
           if (title) artworkPrompt += `, ${title}`;
           if (theme) artworkPrompt += `, ${theme} theme`;
           
           artworkPrompt += `, vibrant colors, modern design, music industry style`;
           
           return artworkPrompt;
       }

	   async function generateLyrics() {
	   		const prompt = buildLyricsPrompt();
	   		const encodedPrompt = encodeURIComponent(prompt);
	   		
	   		// Try different models in order of preference
	   		const models = [
	   			'openai',           // GPT-4.1 Mini
	   			'openai-fast',      // GPT-4.1 Nano  
	   			'grok',            // xAI Grok-3 Mini
	   			'mistral',         // Mistral Small 3.1 24B
	   			'llamascout',      // Llama 4 Scout 17B
	   			'qwen-coder',      // Qwen 2.5 Coder 32B
	   			'deepseek'         // DeepSeek V3
	   		];
	   		
	   		for (const model of models) {
	   			try {
	   				const randomSeed = Math.floor(Math.random() * 1000000);
	   				const lyricsUrl = `${TEXT_API}${encodedPrompt}?model=${model}&seed=${randomSeed}&referrer=songcomposer`;
	   				
	   				showStatus(`Trying ${model} model...`, 'info');
	   				
	   				const response = await fetch(lyricsUrl);
	   				
	   				if (response.ok) {
	   					const lyrics = await response.text();
	   					if (lyrics && lyrics.length > 50) {
	   						showStatus(`Success with ${model} model!`, 'success');
	   						return lyrics;
	   					}
	   				}
	   				
	   				console.warn(`${model} failed with status: ${response.status}`);
	   				
	   			} catch (error) {
	   				console.warn(`${model} model failed:`, error);
	   			}
	   			
	   			// Small delay between attempts
	   			await new Promise(resolve => setTimeout(resolve, 1000));
	   		}
	   		
	   		throw new Error('All models are currently unavailable. Please try again later.');
	   }

       // Generate artwork
       async function generateArtwork() {
           const artworkPrompt = buildArtworkPrompt();
           const encodedPrompt = encodeURIComponent(artworkPrompt);
           const randomSeed = Math.floor(Math.random() * 1000000);
           const artworkUrl = `${IMAGE_API}${encodedPrompt}?width=512&height=512&model=flux&enhance=true&nologo=true&seed=${randomSeed}&referrer=songcomposer`;
           
           return artworkUrl;
       }
		
       // Generate complete song
       async function generateCompleteSong() {
           const title = document.getElementById('song-title').value.trim();
           const theme = document.getElementById('song-theme').value.trim();
           
           if (!title && !theme) {
               showStatus('Please provide at least a song title or theme! üéµ', 'error');
               return;
           }
           
           setLoading(generateLyricsBtn, true, 'Composing your song...');
           lyricsSection.classList.add('hidden');
           
           // Create song data without ID (will be auto-generated)
           const songData = {
               title: title || 'Untitled',
               artist: document.getElementById('song-artist').value.trim() || 'Unknown',
               theme: theme || 'Unknown',
               mood: document.getElementById('song-mood').value,
               genre: document.getElementById('custom-genre').value.trim() || selectedGenre,
               structure: document.getElementById('song-structure').value,
               timestamp: new Date().toISOString(),
               favorited: false,
               lyrics: '',
               artworkUrl: null,
           };
           
           try {
               // Step 1: Generate lyrics
               showStatus('Writing your song lyrics... ‚úçÔ∏è', 'info');
               const lyrics = await generateLyrics();
               songData.lyrics = lyrics;
               
               // Display lyrics immediately
               displayLyrics(lyrics);
               
               // Save to database
               await saveNewSong(songData);
               
               // Set as current song
               currentSong = songData;
               
               // Reload library to show new song
               await loadLibrary();
               
               showStatus('Song created! Generating artwork and audio... üé®üé§', 'success');
               
               // Step 2: Generate artwork (async)
				generateArtwork()
					.then(artworkUrl => {
						songData.artworkUrl = artworkUrl;
						showArtwork(artworkUrl);
						return updateSong(songData);
					})
                   .catch(err => {
                       console.error('Artwork generation failed:', err);
                       showStatus('Artwork generation failed', 'error');
                   });
               
           } catch (error) {
               console.error('Song generation failed:', error);
               showStatus('Failed to create song! Please try again. üéµ', 'error');
           } finally {
               setLoading(generateLyricsBtn, false);
           }
       }

       // Refresh artwork
       window.refreshArtwork = async function() {
           if (!currentSong) return;
           
           const refreshBtn = document.querySelector('.refresh-artwork-btn');
           if (refreshBtn) {
               refreshBtn.innerHTML = '‚è≥';
               refreshBtn.style.pointerEvents = 'none';
           }
           
           showStatus('Generating new artwork... üé®', 'info');
           
           try {
				const artworkUrl = await generateArtwork();

				currentSong.artworkUrl = artworkUrl;
				showArtwork(artworkUrl);
                await loadLibrary();
               
                showStatus('New artwork generated! üé®', 'success');
               
           } catch (error) {
               console.error('Artwork refresh failed:', error);
               showStatus('Failed to generate new artwork. Please try again! üé®', 'error');
           } finally {
               if (refreshBtn) {
                   refreshBtn.innerHTML = 'üîÑ';
                   refreshBtn.style.pointerEvents = 'auto';
               }
           }
       };

       // Display lyrics with edit functionality
       function displayLyrics(lyrics) {
           lyricsDisplay.innerHTML = `
               <div id="lyrics-text" style="cursor: pointer; position: relative;">
                   ${lyrics}
                   <div style="position: absolute; top: 10px; right: 10px; font-size: 0.8rem; color: #667eea; opacity: 0.7;">
                       Click to edit ‚úèÔ∏è
                   </div>
               </div>
               <div id="lyrics-editor" class="hidden">
                   <textarea id="lyrics-textarea" class="editable-lyrics">${lyrics}</textarea>
                   <div class="lyrics-edit-controls">
                       <button class="mini-button" onclick="saveLyricsEdit()">üíæ Save Changes</button>
                       <button class="mini-button" onclick="cancelLyricsEdit()">‚ùå Cancel</button>
                   </div>
               </div>
           `;
           
           document.getElementById('lyrics-text').addEventListener('click', startLyricsEdit);
           
           lyricsSection.classList.remove('hidden');
           lyricsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
       }

       // Start lyrics editing
       function startLyricsEdit() {
           document.getElementById('lyrics-text').classList.add('hidden');
           document.getElementById('lyrics-editor').classList.remove('hidden');
           document.getElementById('lyrics-textarea').focus();
       }

       // Save lyrics edit
       window.saveLyricsEdit = async function() {
           const newLyrics = document.getElementById('lyrics-textarea').value.trim();
           
           if (!newLyrics) {
               showStatus('Lyrics cannot be empty! ‚úèÔ∏è', 'error');
               return;
           }
           
           if (!currentSong) {
               showStatus('No song to update! ‚úèÔ∏è', 'error');
               return;
           }
           
           currentSong.lyrics = newLyrics;
           
           try {
               await updateSong(currentSong);
               
               document.getElementById('lyrics-text').innerHTML = `
                   ${newLyrics}
                   <div style="position: absolute; top: 10px; right: 10px; font-size: 0.8rem; color: #667eea; opacity: 0.7;">
                       Click to edit ‚úèÔ∏è
                   </div>
               `;
               
               document.getElementById('lyrics-editor').classList.add('hidden');
               document.getElementById('lyrics-text').classList.remove('hidden');
               
               await loadLibrary();
               showStatus('Lyrics updated successfully! ‚úèÔ∏è', 'success');
               
           } catch (error) {
               console.error('Error saving lyrics:', error);
               showStatus('Failed to save lyrics changes! ‚úèÔ∏è', 'error');
           }
       };

       // Cancel lyrics edit
       window.cancelLyricsEdit = function() {
           document.getElementById('lyrics-editor').classList.add('hidden');
           document.getElementById('lyrics-text').classList.remove('hidden');
       };

       // Show artwork with refresh button
       function showArtwork(artworkUrl) {
           songArtworkContainer.innerHTML = `
               <div class="artwork-container">
                   <img id="song-artwork" class="song-artwork" alt="Song artwork" src="${artworkUrl}" />
                   <button class="refresh-artwork-btn" onclick="refreshArtwork()" title="Generate new artwork">
                       üîÑ
                   </button>
               </div>
           `;
           songArtworkContainer.classList.remove('hidden');
       }

       // Toggle favorite
       async function toggleFavorite() {
           if (!currentSong) return;
           
           currentSong.favorited = !currentSong.favorited;
           
           try {
               await updateSong(currentSong);
               
               favoriteSongBtn.innerHTML = currentSong.favorited ? 
                   '‚≠ê Remove from Favorites' : '‚≠ê Add to Favorites';
               
               await loadLibrary();
               showStatus(currentSong.favorited ? 'Added to favorites! ‚≠ê' : 'Removed from favorites! ‚≠ê', 'success');
           } catch (error) {
               console.error('Error updating favorite:', error);
               showStatus('Failed to update favorite status', 'error');
           }
       }

       // Copy lyrics
       async function copyLyrics() {
           if (!currentSong || !currentSong.lyrics) {
               showStatus('No lyrics to copy! üìã', 'error');
               return;
           }
           
           try {
               await navigator.clipboard.writeText(currentSong.lyrics);
               showStatus('Lyrics copied to clipboard! üìã', 'success');
           } catch (error) {
               console.error('Copy failed:', error);
               showStatus('Failed to copy lyrics. Please select and copy manually! üìã', 'error');
           }
       }

       // Update library UI
       function updateLibraryUI() {
           if (songLibrary.length === 0) {
               songLibraryList.innerHTML = `
                   <div style="text-align: center; color: #718096; font-style: italic; padding: 3rem;">
                       No songs created yet. Start composing your first masterpiece above! üéº
                   </div>
               `;
               return;
           }
           
           songLibraryList.innerHTML = songLibrary.map((song, index) => {
               const preview = song.lyrics ? song.lyrics.substring(0, 150) + '...' : 'No lyrics yet...';
               const date = new Date(song.timestamp).toLocaleDateString();
               
               return `
                   <div class="song-card ${song.favorited ? 'favorited' : ''}" data-song-id="${song.id}">
                       <div class="song-title">
                           ${song.favorited ? '‚≠ê ' : ''}${song.title}
                       </div>
                       <div class="song-preview">${preview}</div>
                       <div class="song-meta">
                           <span>üìÖ ${date} | üéµ ${song.genre} | üòä ${song.mood}</span>
                       </div>
                       <div class="song-actions">
                           <button class="mini-button" onclick="loadSongFromLibrary(${song.id})">üéº View Full Song</button>
                           <button class="mini-button" onclick="copyLibraryLyrics(${song.id})">üìã Copy Lyrics</button>
                           <button class="mini-button ${song.favorited ? 'favorite' : ''}" onclick="toggleLibraryFavorite(${song.id})">
                               ${song.favorited ? '‚≠ê Favorited' : '‚≠ê Favorite'}
                           </button>
                           <button class="mini-button" onclick="deleteSongFromLibrary(${song.id})">üóëÔ∏è Delete</button>
                       </div>
                   </div>
               `;
           }).join('');
       }

       // Load song from library
       window.loadSongFromLibrary = async function(songId) {
           const song = songLibrary.find(s => s.id === songId);
           if (!song) {
               showStatus('Song not found!', 'error');
               return;
           }
           
           currentSong = song;
           
           // Fill form fields
           document.getElementById('song-title').value = song.title;
           document.getElementById('song-artist').value = song.artist || '';
           document.getElementById('song-theme').value = song.theme || '';
           document.getElementById('song-mood').value = song.mood;
           document.getElementById('song-structure').value = song.structure || 'verse-chorus';
           document.getElementById('voice-type').value = song.voice || 'nova';
           
           // Update genre selection
           if (song.genre) {
               document.querySelectorAll('.genre-button').forEach(b => b.classList.remove('selected'));
               const genreButton = document.querySelector(`[data-genre="${song.genre}"]`);
               if (genreButton) {
                   genreButton.classList.add('selected');
                   selectedGenre = song.genre;
               } else {
                   document.getElementById('custom-genre').value = song.genre;
               }
           }
           
           // Update regenerate voice selector
           const regenVoiceSelect = document.getElementById('regenerate-voice-type');
           if (regenVoiceSelect) {
               regenVoiceSelect.value = song.voice || 'nova';
           }
           
           // Display lyrics
           displayLyrics(song.lyrics);
           
           // Show artwork
           if (song.artworkUrl) {
               showArtwork(song.artworkUrl);
           } else {
               songArtworkContainer.classList.remove('hidden');
               songArtworkContainer.innerHTML = `
                   <div style="width: 100%; max-width: 400px; height: 400px; background: linear-gradient(135deg, #f7fafc, #edf2f7); border: 2px dashed #cbd5e0; border-radius: 15px; display: flex; align-items: center; justify-content: center; margin: 1rem auto;">
                       <div style="text-align: center; color: #667eea;">
                           <div class="loading-spinner" style="margin: 0 auto 1rem;"></div>
                           <p>Creating album artwork... üé®</p>
                       </div>
                   </div>
               `;
               
               // Generate missing artwork
				generateArtwork()
					.then(artworkUrl => {
						song.artworkUrl = artworkUrl;  // ‚Üê USE 'song' NOT 'songData'
						showArtwork(artworkUrl);
						return updateSong(song);  // ‚Üê USE 'song' NOT 'songData'
					})
                    .then(() => loadLibrary())
                    .catch(error => {
                       console.error('Failed to generate missing artwork:', error);
                       songArtworkContainer.innerHTML = `
                           <div style="width: 100%; max-width: 400px; height: 200px; background: #fed7d7; border: 2px dashed #e53e3e; border-radius: 15px; display: flex; align-items: center; justify-content: center; margin: 1rem auto;">
                               <p style="color: #742a2a;">‚ùå Artwork generation failed</p>
                           </div>
                       `;
                   });
           }
           
           // Update favorite button
           favoriteSongBtn.innerHTML = song.favorited ? 
               '‚≠ê Remove from Favorites' : '‚≠ê Add to Favorites';
           
           showStatus('Song loaded! ‚ú®', 'success');
           lyricsSection.classList.remove('hidden');
           lyricsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
       };

       // Copy library lyrics
       window.copyLibraryLyrics = async function(songId) {
           const song = songLibrary.find(s => s.id === songId);
           if (!song || !song.lyrics) {
               showStatus('No lyrics to copy!', 'error');
               return;
           }
           
           try {
               await navigator.clipboard.writeText(song.lyrics);
               showStatus('Lyrics copied to clipboard! üìã', 'success');
           } catch (error) {
               console.error('Copy failed:', error);
               showStatus('Failed to copy lyrics! üìã', 'error');
           }
       };

       // Toggle library favorite
       window.toggleLibraryFavorite = async function(songId) {
           const song = songLibrary.find(s => s.id === songId);
           if (!song) return;
           
           song.favorited = !song.favorited;
           
           try {
               await updateSong(song);
               await loadLibrary();
               showStatus(song.favorited ? 'Added to favorites! ‚≠ê' : 'Removed from favorites! ‚≠ê', 'success');
           } catch (error) {
               console.error('Error updating favorite:', error);
               showStatus('Failed to update favorite status', 'error');
           }
       };

       // Delete song from library
       window.deleteSongFromLibrary = async function(songId) {
           if (!confirm('Are you sure you want to delete this song? üóëÔ∏è')) {
               return;
           }
           
           try {
               await deleteSong(songId);
               
               // If this was the current song, clear it
               if (currentSong && currentSong.id === songId) {
                   currentSong = null;
                   lyricsSection.classList.add('hidden');
               }
               
               await loadLibrary();
               showStatus('Song deleted! üóëÔ∏è', 'success');
           } catch (error) {
               console.error('Error deleting song:', error);
               showStatus('Failed to delete song! üóëÔ∏è', 'error');
           }
       };

       // Clear entire library
       async function clearLibrary() {
           if (!confirm('Are you sure you want to delete ALL songs? This cannot be undone! üóëÔ∏è')) {
               return;
           }
           
           try {
               await dbOperation('songs', 'readwrite', (store) => {
                   return store.clear();
               });
               
               songLibrary = [];
               currentSong = null;
               lyricsSection.classList.add('hidden');
               updateLibraryUI();
               showStatus('All songs deleted! üóëÔ∏è', 'success');
           } catch (error) {
               console.error('Error clearing library:', error);
               showStatus('Failed to clear library! üóëÔ∏è', 'error');
           }
       }

       // Loading state helper
       function setLoading(button, isLoading, loadingText = 'Loading...') {
           if (isLoading) {
               button.disabled = true;
               button.innerHTML = `<span class="loading-spinner"></span> ${loadingText}`;
           } else {
               button.disabled = false;
               if (button.id === 'generate-lyrics-btn') {
                   button.innerHTML = '‚ú® Create My Song Lyrics! ‚ú®';
               } else if (button.id === 'regenerate-lyrics-btn') {
                   button.innerHTML = 'üîÑ New Version';
               }
           }
       }

       // Add musical effects to buttons
       document.addEventListener('DOMContentLoaded', function() {
           const magicButtons = document.querySelectorAll('.magic-button');
           magicButtons.forEach(button => {
               button.addEventListener('click', function(e) {
                   const notes = ['üéµ', 'üé∂', 'üéº', 'üé§', 'üé∏'];
                   for (let i = 0; i < 8; i++) {
                       setTimeout(() => {
                           const note = document.createElement('div');
                           note.innerHTML = notes[Math.floor(Math.random() * notes.length)];
                           note.style.position = 'absolute';
                           note.style.left = e.pageX + (Math.random() - 0.5) * 60 + 'px';
                           note.style.top = e.pageY + (Math.random() - 0.5) * 60 + 'px';
                           note.style.pointerEvents = 'none';
                           note.style.fontSize = '1.5rem';
                           note.style.zIndex = '9999';
                           note.style.animation = 'noteFloat 1.2s ease-out forwards';
                           document.body.appendChild(note);
                           
                           setTimeout(() => note.remove(), 1200);
                       }, i * 150);
                   }
               });
           });
           
           const style = document.createElement('style');
           style.textContent = `
               @keyframes noteFloat {
                   0% { opacity: 1; transform: translateY(0px) scale(1) rotate(0deg); }
                   100% { opacity: 0; transform: translateY(-40px) scale(0.3) rotate(360deg); }
               }
           `;
           document.head.appendChild(style);

           // Set copyright year
           const currentYear = new Date().getFullYear();
           const startYear = 2024;
           const yearDisplay = currentYear > startYear ? `${startYear}-${currentYear}` : currentYear;
           document.getElementById('copyright-year').textContent = yearDisplay;
       });
   </script>

   <footer class="disclaimer-footer">
       <p>This tool is intended for songwriting and creative purposes. Please review all generated content for appropriateness and originality before commercial use. Songs are generated by AI and may require editing for professional use.</p>
       <p>Lyrics, Image, Audio Generation Powered by Pollinations.ai</p>
       <p>¬© <span id="copyright-year"></span> AI-Ministries.com - All Rights Reserved</p>
   </footer>

</body>
</html>