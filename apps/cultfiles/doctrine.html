<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>CULT MANUAL: Doctrine / Purity</title>

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Inter:wght@400;500&display=swap" rel="stylesheet"/>

<style>
:root {
  --bg: #0a0705;
  --panel: #141110;
  --panel-light: #1d1815;
  --accent: #e8c66a;        /* candle gold */
  --accent-soft: rgba(232,198,106,0.15);
  --accent-glow: 0 0 12px rgba(232,198,106,0.5);
  --blood: #681919;         /* ritual red */
  --text: #f5f2e8;
  --muted: #9a9382;
  --line: #3a2f22;
  --radius-lg: 18px;
  --radius-md: 10px;
  --radius-sm: 6px;
  --font-head: 'Cinzel', serif;
  --font-body: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

/* BASE */
* {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
}

body {
  margin: 0;
  background:
    radial-gradient(circle at 20% 15%, rgba(80,40,20,0.28) 0%, rgba(0,0,0,0) 70%),
    radial-gradient(circle at 80% 80%, rgba(232,198,106,0.08) 0%, rgba(0,0,0,0) 70%),
    #000000;
  color: var(--text);
  font-family: var(--font-body);
  display: flex;
  flex-direction: row;
  min-height: 100vh;
  overflow-x: hidden;
  overflow-y: auto;
  line-height: 1.45;
  padding-top: 58px;
}

/* TOP NAV BAR */
.top-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: rgba(10,7,5,0.92);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border-bottom: 1px solid rgba(255,255,255,0.07);
  z-index: 9999;
  box-shadow: 0 20px 30px rgba(0,0,0,0.95);
  font-family: var(--font-head);
}

.nav-inner {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 14px 20px;
  padding: 12px 16px;
  max-width: 1400px;
  margin: 0 auto;
}

.nav-brand {
  color: var(--accent);
  font-weight: 600;
  font-size: 0.9rem;
  letter-spacing: 0.06em;
  text-shadow: 0 0 8px rgba(232,198,106,0.6), 0 0 24px rgba(232,198,106,0.4);
  white-space: nowrap;
}

.nav-links {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 12px 16px;
  font-size: 0.7rem;
  letter-spacing: 0.04em;
}

.nav-link {
  color: var(--text);
  text-decoration: none;
  padding-bottom: 2px;
  border-bottom: 2px solid transparent;
}
.nav-link.active {
  color: var(--accent);
  border-bottom-color: var(--accent);
  text-shadow: 0 0 12px rgba(232,198,106,0.6);
}
.nav-link:hover {
  color: var(--accent);
  text-shadow: 0 0 12px rgba(232,198,106,0.6);
}

/* SIDEBAR */
#sidebar {
  width: 270px;
  background:
    radial-gradient(circle at 0% 0%, rgba(104,25,25,0.35) 0%, rgba(0,0,0,0) 60%),
    radial-gradient(circle at 100% 0%, rgba(232,198,106,0.07) 0%, rgba(0,0,0,0) 70%),
    #0a0705;
  border-right: 1px solid var(--line);
  display: flex;
  flex-direction: column;
  box-shadow: 8px 0 24px rgba(0,0,0,0.9);
  position: relative;
  z-index: 10;
}

.sidebar-header {
  padding: 20px 16px 16px;
  border-bottom: 1px solid rgba(255,255,255,0.07);
  background: radial-gradient(circle at 20% 20%, rgba(232,198,106,0.12) 0%, rgba(0,0,0,0) 70%);
}

.app-title {
  font-family: var(--font-head);
  font-size: 1rem;
  font-weight: 600;
  letter-spacing: 0.06em;
  color: var(--text);
  display: flex;
  flex-direction: column;
  gap: 4px;
  text-shadow: 0 0 6px rgba(232,198,106,0.5);
}

.app-mainline {
  display: flex;
  flex-wrap: wrap;
  column-gap: 8px;
  row-gap: 4px;
  align-items: baseline;
}

.app-mainline span:first-child {
  color: var(--text);
}

.section-subtitle {
  color: var(--accent);
  font-size: 0.7rem;
  font-weight: 500;
  text-shadow: 0 0 8px rgba(232,198,106,0.6);
  letter-spacing: 0.07em;

  white-space: normal;       /* allow wrapping */
  word-break: break-word;    /* if it's long, wrap instead of spilling */
  max-width: 100%;           /* respect sidebar width */
}

.app-sub {
  font-size: 0.7rem;
  font-weight: 400;
  color: var(--muted);
  line-height: 1.4;
  margin-top: 6px;
}

.search-wrap {
  margin-top: 16px;
  position: relative;
}

.search-wrap input {
  width: 100%;
  background: rgba(0,0,0,0.4);
  border: 1px solid var(--line);
  border-radius: var(--radius-md);
  color: var(--text);
  font-size: 0.8rem;
  padding: 9px 10px 9px 30px;
  outline: none;
  box-shadow:
    inset 0 0 10px rgba(232,198,106,0.25),
    0 0 12px rgba(104,25,25,0.4);
}
.search-wrap input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 8px rgba(232,198,106,0.6),
              inset 0 0 10px rgba(232,198,106,0.3),
              0 0 18px rgba(104,25,25,0.5);
}
.search-icon {
  position: absolute;
  left: 9px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.7rem;
  color: var(--accent);
  text-shadow: var(--accent-glow);
  pointer-events: none;
}

/* DOCTRINE LIST */
.doctrine-list {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 8px 0 80px;
  scrollbar-width: thin;
  scrollbar-color: var(--accent) #000;
}
.doctrine-list::-webkit-scrollbar {
  width: 6px;
}
.doctrine-list::-webkit-scrollbar-track {
  background: #000;
}
.doctrine-list::-webkit-scrollbar-thumb {
  background: var(--accent);
  border-radius: 3px;
  box-shadow: 0 0 10px rgba(232,198,106,0.7);
}

.doctrine-item {
  padding: 10px 16px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  cursor: pointer;
  position: relative;
  transition: background 0.12s;
  display: flex;
  flex-direction: column;
}
.doctrine-item:hover {
  background: rgba(232,198,106,0.08);
}
.doctrine-item.active {
  background: rgba(232,198,106,0.16);
  box-shadow: inset 0 0 12px rgba(232,198,106,0.6);
}

/* stacked title+pill in sidebar */
.doctrine-line1 {
  display: block;
}

.doctrine-name {
  font-family: var(--font-head);
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text);
  letter-spacing: 0.04em;
  display: block;
  margin-bottom: 6px;
  max-width: 100%;
  word-break: break-word;
  text-shadow: 0 0 8px rgba(104,25,25,0.6);
}

.doctrine-tag {
  background: var(--accent);
  color: #000;
  font-size: 0.6rem;
  font-weight: 600;
  line-height: 1.2;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  white-space: nowrap;
  box-shadow:
    0 0 8px rgba(232,198,106,0.6),
    0 0 20px rgba(104,25,25,0.6);
  margin-bottom: 6px;
  display: inline-block;
  max-width: 100%;
}

.doctrine-desc {
  font-size: 0.7rem;
  font-weight: 400;
  color: var(--muted);
  line-height: 1.3;
  word-break: break-word;
}

/* MAIN PANEL */
#main {
  flex: 1;
  background:
    radial-gradient(circle at 80% 20%, rgba(232,198,106,0.07) 0%, rgba(0,0,0,0) 70%),
    radial-gradient(circle at 10% 90%, rgba(104,25,25,0.22) 0%, rgba(0,0,0,0) 70%),
    #0a0705;
  position: relative;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: thin;
  scrollbar-color: var(--accent) #000;
}
#main::-webkit-scrollbar {
  width: 8px;
}
#main::-webkit-scrollbar-thumb {
  background: var(--accent);
  border-radius: 4px;
  box-shadow: 0 0 10px rgba(232,198,106,0.7);
}

.main-inner {
  max-width: 900px;
  padding: 24px clamp(16px,2vw,24px) 120px;
  margin: 0 auto;
  position: relative;
  color: var(--text);
}

/* HEADER CARD */
#doctrineHeader {
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: var(--radius-lg);
  box-shadow:
    0 30px 60px rgba(0,0,0,0.95),
    0 0 60px rgba(232,198,106,0.25),
    0 0 120px rgba(104,25,25,0.4);
  position: relative;
  padding: 20px 20px 16px;
}

.doctrine-title-row {
  display: flex;
  flex-wrap: wrap;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
}

#doctrineName {
  font-family: var(--font-head);
  font-size: 1.25rem;
  font-weight: 600;
  letter-spacing: 0.06em;
  color: var(--text);
  text-shadow:
    0 0 10px rgba(232,198,106,0.6),
    0 0 30px rgba(104,25,25,0.7);
  margin: 0;
  line-height: 1.2;
}

#doctrineTagline {
  font-size: 0.7rem;
  color: #000;
  background: var(--accent);
  padding: 4px 8px;
  border: 1px solid var(--accent);
  border-radius: var(--radius-sm);
  line-height: 1.3;
  font-weight: 600;
  text-shadow: none;
  box-shadow:
    0 0 20px rgba(232,198,106,0.5),
    0 0 40px rgba(104,25,25,0.6);
  white-space: nowrap;
  max-width: 100%;
}

#doctrineAngle {
  font-size: 0.7rem;
  color: var(--muted);
  font-style: italic;
  line-height: 1.4;
}

#doctrineProfile {
  margin-top: 16px;
  font-size: 0.8rem;
  color: var(--text);
  line-height: 1.5;
}

/* ACCORDION SECTIONS */
.section-card {
  margin-top: 20px;
  background: var(--panel-light);
  border: 1px solid var(--line);
  border-radius: var(--radius-md);
  overflow: hidden;
  box-shadow:
    0 20px 40px rgba(0,0,0,0.9),
    0 0 40px rgba(104,25,25,0.3);
}

.section-header {
  width: 100%;
  background: linear-gradient(to right, rgba(232,198,106,0.12) 0%, rgba(0,0,0,0) 80%);
  color: var(--text);
  border: 0;
  border-bottom: 1px solid rgba(255,255,255,0.06);
  font-family: var(--font-head);
  font-weight: 600;
  font-size: 0.8rem;
  text-align: left;
  line-height: 1.4;
  letter-spacing: 0.06em;
  padding: 14px 16px;
  position: relative;
  cursor: pointer;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  text-shadow:
    0 0 8px rgba(232,198,106,0.5),
    0 0 20px rgba(104,25,25,0.6);
}
.section-header .label {
  display: flex;
  flex-direction: column;
  gap: 3px;
}
.section-header .title-line {
  display: flex;
  align-items: baseline;
  gap: 8px;
}
.section-header .section-title {
  color: var(--text);
}
.section-header .hint {
  color: var(--muted);
  font-family: var(--font-body);
  font-size: 0.6rem;
  font-weight: 400;
  text-shadow: none;
}
.section-header .chevron {
  font-size: 0.8rem;
  line-height: 1;
  color: var(--accent);
  text-shadow: 0 0 10px rgba(232,198,106,0.6), 0 0 20px rgba(104,25,25,0.6);
  transition: transform 0.15s;
}
.section-card.open .section-header .chevron {
  transform: rotate(90deg);
}

.section-body {
  display: none;
  padding: 16px;
  font-size: 0.8rem;
  color: var(--text);
  line-height: 1.5;
}
.section-card.open .section-body {
  display: block;
  background:
    radial-gradient(circle at 10% 0%, rgba(232,198,106,0.07) 0%, transparent 70%),
    radial-gradient(circle at 100% 0%, rgba(104,25,25,0.25) 0%, transparent 70%);
}
.section-body ul {
  margin: 0;
  padding-left: 18px;
}
.section-body li {
  margin-bottom: 10px;
  color: var(--text);
}
.section-body li strong {
  color: var(--accent);
  font-weight: 600;
  text-shadow:
    0 0 12px rgba(232,198,106,0.5),
    0 0 22px rgba(104,25,25,0.6);
}

/* FOOTER NOTE */
.footer-note {
  margin-top: 32px;
  font-size: 0.65rem;
  line-height: 1.4;
  color: var(--muted);
  text-align: center;
  padding-bottom: 60px;
  max-width: 640px;
  margin-left: auto;
  margin-right: auto;
  border-top: 1px solid rgba(255,255,255,0.05);
  padding-top: 20px;
  font-style: italic;
}

/* RESPONSIVE */
@media (max-width: 750px) {
  #sidebar {
    width: 220px;
  }
  #doctrineName {
    font-size: 1.1rem;
  }
  #doctrineTagline {
    font-size: 0.7rem;
  }
}
@media (max-width: 600px) {
  body {
    flex-direction: column;
  }
  #sidebar {
    width: 100%;
    max-height: 40vh;
    border-right: 0;
    border-bottom: 1px solid var(--line);
  }
  #main {
    flex: 1;
  }
  .doctrine-list {
    max-height: calc(40vh - 130px);
  }
  .doctrine-title-row {
    flex-direction: column;
    align-items: flex-start;
  }
  #doctrineTagline {
    white-space: normal;
  }
}
.nav-right{ margin-left:auto; display:flex; gap:12px; }
@media (max-width:700px){ .nav-right{ width:100%; justify-content:flex-end; gap:10px; } }

</style>
</head>
<body>

<!-- TOP NAV -->
<nav class="top-nav">
  <div class="nav-inner">
    <div class="nav-brand">CULT MANUAL</div>
    <div class="nav-links">
      <a class="nav-link" href="index.html">Overview / Indoctrination</a>
      <a class="nav-link" href="recruitment.html">Recruitment</a>
      <a class="nav-link active" href="doctrine.html">Doctrine / Purity</a>
      <a class="nav-link" href="enforcement.html">Enforcement</a>
      <a class="nav-link" href="exit.html">Exit Cost</a>
    </div>
    <div class="nav-right">
      <a class="nav-link" href="#"
         onclick="if(history.length>1){history.back();}else{location.href='/apps/archive-gate.html'};return false;">← Back</a>
      <a class="nav-link" href="/apps/archive-gate.html">Archive</a>
      <a class="nav-link" href="/">Home</a>
    </div>
  </div>
</nav>

<!-- SIDEBAR -->
<aside id="sidebar">
  <div class="sidebar-header">
    <div class="app-title">
      <div class="app-mainline">
        <span>DOCTRINE / PURITY</span>
        <span class="section-subtitle">RULE / SIN / CONTROL</span>
      </div>
      <div class="section-subtitle" style="color:var(--muted);text-shadow:none;">
        “Clean” means loyal. “Impure” means disposable.
      </div>
    </div>

    <div class="app-sub">
      The rules aren’t holy. The rules are a sorting machine:
      who obeys instantly, who hesitates, who thinks.
    </div>

    <div class="search-wrap">
      <span class="search-icon">🔍</span>
      <input id="searchInput" type="text" placeholder="Search internal rules..." />
    </div>
  </div>

  <div id="doctrineList" class="doctrine-list">
    <!-- JS fills -->
  </div>
</aside>

<!-- MAIN -->
<main id="main">
  <div class="main-inner">
    <section id="doctrineHeader">
      <div class="doctrine-title-row">
        <h1 id="doctrineName">Loading...</h1>
        <div id="doctrineTagline"></div>
      </div>
      <div id="doctrineAngle"></div>
      <div id="doctrineProfile"></div>
    </section>

    <div id="doctrineSections">
      <!-- JS accordion sections -->
    </div>

    <div class="footer-note">
      Purity systems are rigged. You can’t win them — only submit to whoever holds the measuring stick.
    </div>
  </div>
</main>

<script>
/*
Doctrine Object Model:
{
  id: 'purity-law',
  name: 'Purity Law',
  tagline: '“Pure = worthy. Question = dirty.”',
  angle: 'Morality math that always ends with you below leadership.',
  shortDesc: 'Endless moral / spiritual / ideological rules that keep moving.',
  profile: 'Long explainer...',
  officialRule: [...],
  hiddenFunction: [...],
  enforcement: [...],
  warpsYou: [...],
  panicSigns: [...],
  resistInside: [...]
}
*/

let openCards = [];
let currentDoctrineId = null;

const doctrines = [
  {
    id: 'purity-law',
    name: 'Purity Law',
    tagline: '“Pure = worthy. Question = dirty.”',
    angle: 'Morality math that always ends with you beneath whoever wrote the math.',
    shortDesc:
      'Religious, political, spiritual, ideological, self-improvement, whatever costume it wears — the core is the same: obedience gets labeled “clean,” doubt gets labeled “contamination.”',
    profile:
      '“Purity” is how the group sorts you. Diet purity. Sexual purity. Thought purity. Loyalty purity. Vibe purity. Alignment purity. Wokeness purity. Holiness purity. Whatever language the group speaks, purity is the word they use to turn basic human impulse into sin, and sin into leverage. The rules never fully stabilize, because if you could actually stay “pure,” they’d lose leverage. So the bar keeps moving. You are never done cleansing.',
    officialRule: [
      '“We don’t associate with corruption / low vibration / toxic people / the unawakened / the sinful.”',
      '“We hold ourselves to a higher standard than the broken world.”',
      '“Impure habits pull the whole community down.”',
      '“You are responsible for keeping the group pure.”'
    ],
    hiddenFunction: [
      'Purity becomes a reason to cut off outsiders who could pull you out.',
      'The standard is intentionally vague so leadership can accuse anyone at any time.',
      'If they call you impure, they can shame, isolate, or punish you without looking abusive — they’re just “protecting the community.”',
      'It creates a ladder: leadership = “holiest / most enlightened,” you = “trying to catch up.” So your correct role is obedience.'
    ],
    enforcement: [
      'Public “check-ins” about whether you slipped, sinned, doubted.',
      'Monitoring of sex, food, sleep, money, relationships, media you consume.',
      '“Accountability partners” whose real job is to report you.',
      'Humiliation framed as “correction in love.”'
    ],
    warpsYou: [
      'You start policing your own thoughts so you can’t even feel normal anger or fear without guilt.',
      'Guilt becomes constant background noise that keeps you tired and docile.',
      'Your self-worth gets replaced with “how pure I am this week.”',
      'You start snitching on others, because snitching makes you feel momentarily “on the right side.”'
    ],
    panicSigns: [
      'You’re scared to admit totally ordinary human stuff (sexual desire, boredom, frustration).',
      'Small slips are treated like existential threats to the entire movement.',
      'People vanish after being labeled “impure,” and nobody says their name again.',
      'The rules contradict themselves — and somehow you’re still wrong.'
    ],
    resistInside: [
      'Clock that “purity” is not about goodness. It’s about rank.',
      'If the definition of “clean” keeps changing, it’s not morality. It’s a leash.',
      'Quietly refuse to report on other members. That’s one of the first real rebellions.',
      'Keep one private part of yourself — music, journal, thought life — that they do not get to grade.'
    ]
  },

  {
    id: 'speech-control',
    name: 'Language / Thought Control',
    tagline: '“We don’t use outsider words here”',
    angle: 'Change the words, change what can be thought.',
    shortDesc:
      'They rewrite vocabulary to bend reality around the leader’s version of truth.',
    profile:
      'You’re told not to say certain words (“depression,” “rape,” “abuse,” “cult,” “doubt”). You must swap in approved terms (“attack from darkness,” “energetic misalignment,” “lesson the universe sent,” “spiritual warfare,” “miscommunication,” “unprocessed shadow,” etc). This sounds harmless at first — “we’re just being intentional with language.” It’s not harmless. If you can’t say “they hurt me,” you also can’t get help.',
    officialRule: [
      '“We speak life, not negativity.”',
      '“Words are spells, choose higher language.”',
      '“Labels from the outside world are traps meant to keep you small.”',
      '“Doubt is slander against what we’re building.”'
    ],
    hiddenFunction: [
      'They erase words that would expose abuse (assault, trafficking, fraud) and replace them with vague mystic phrasing.',
      'They make criticism literally unsayable without breaking “the code.”',
      'They build in self-policing: you feel guilty just naming what hurt you.',
      'They create in-group jargon, which bonds you tighter and makes outsiders sound “ignorant.”'
    ],
    enforcement: [
      'Members correct your wording in real time — “Don’t say that, say this.”',
      'Writing or speaking in normal language is treated as spiritual failure.',
      'You will be publicly called out for “negative frequency” if you describe a problem too honestly.',
      'Eventually no one will listen to you unless you speak in the group’s dialect.'
    ],
    warpsYou: [
      'You stop trusting your own plain description of reality.',
      'You start re-labeling abuse as “lesson,” isolation as “protection,” exhaustion as “devotion.”',
      'You become fluent in minimizing harm done to you.',
      'You become someone who defends the group to new people, because you literally can’t put the harm into words anymore.'
    ],
    panicSigns: [
      'You feel physical stress before you speak, because you’re editing mid-sentence.',
      'You get praised not for honesty, but for “phrasing it right.”',
      'You’re scared to text or email in normal language because it’ll be “used against your vibration.”',
      'You find yourself apologizing for “bad energy” instead of demanding an apology for being hurt.'
    ],
    resistInside: [
      'Keep your original words alive somewhere private: a hidden journal, encrypted notes.',
      'Practice saying sentences in normal human language, even if only in your head: “They hurt me.” “That was abuse.” “That was manipulation.”',
      'Notice who benefits when certain words are forbidden. It’s always the same people.',
      'If you’re not allowed to name harm, you’re not allowed to heal. Clock that.'
    ]
  },

  {
    id: 'obedience-economy',
    name: 'Obedience Economy',
    tagline: '“Sacrifice proves devotion”',
    angle: 'Work, money, time, labor, and body become currency to buy “spiritual credit.”',
    shortDesc:
      'You give until it hurts, and they call the hurt your holiness.',
    profile:
      'Tithes. Mandatory donations. “Suggested” contributions. Working the farm / kitchen / phones / merch table for free. Moving into group housing and paying “community rent” to someone who already owns the property. “Volunteering” 16 hours a day. Being “assigned” sexually or romantically to someone higher-ranked. In cult math, how much you hand over = how loyal you are. The twist: loyalty is never fully paid up.',
    officialRule: [
      '“We give joyfully, because the Mission matters more than ego comfort.”',
      '“Money is just one form of energy exchange.”',
      '“If you’re still holding back resources, you’re still holding back part of yourself.”',
      '“The body is a vessel for service.”'
    ],
    hiddenFunction: [
      'They get free labor and cash, you get burnout and debt.',
      'They reframe exploitation as “your chance to transcend selfishness.”',
      'Your time is no longer yours, so you can’t have outside relationships or job stability.',
      'Financial dependency traps you — if you leave, you’re broke, homeless, unemployed, ashamed.'
    ],
    enforcement: [
      'Public praise for “the ones who give everything.”',
      'Public shame for “the ones still clinging to ego comfort.”',
      'They keep private score of who gave what and bring it up in confrontations.',
      'Leadership’s lifestyle becomes off-limits to question (“They carry the spiritual burden, they deserve comfort”).'
    ],
    warpsYou: [
      'You start thinking rest is theft.',
      'You feel guilty buying yourself food or medicine instead of donating.',
      'You think exhaustion = virtue.',
      'You slowly forget what it felt like to have any say over your own hours or your own body.'
    ],
    panicSigns: [
      'Your basic survival (food, housing, meds) is controlled by the group.',
      'Refusing a “request” is treated like betrayal.',
      'You’re told that leaving means you’re “choosing selfish comfort over truth.”',
      'You don’t remember the last decision you made that did NOT have to be approved.'
    ],
    resistInside: [
      'Privately track hours, money, labor you’re giving. Numbers cut through fog.',
      'Hide a little emergency stash (cash, ID copies, meds) somewhere they don’t control.',
      'Tell yourself: “Being tired is not proof I’m holy. It might just be proof I’m being used.”',
      'Clock how leadership lives compared to you. Do not explain that away.'
    ]
  },

  {
    id: 'infallible-leader',
    name: 'Infallible Leader Doctrine',
    tagline: '“Questioning them is questioning truth itself”',
    angle: 'The leader stops being human. Now they’re scripture with a pulse.',
    shortDesc:
      'Eventually the rules shift from “this is what we believe” to “this is WHO we believe.”',
    profile:
      'All cults bend toward monarchy. At first it’s “we’re just a community.” Then it’s “they’re our guide.” Then it’s “they’re chosen.” Then it’s “their word IS reality.” At that point, there is no doctrine beyond what the leader feels like saying today. If they wake up angry, anger is holy. If they want sex, sex is sacrament. If they demand money, poverty becomes virtue. The belief system becomes a mirror that always shows them as flawless.',
    officialRule: [
      '“Do not slander the anointed.”',
      '“Their perspective is higher than ours — accept correction with gratitude.”',
      '“They see your blockages better than you can.”',
      '“Obedience to them IS obedience to truth.”'
    ],
    hiddenFunction: [
      'Any harm they do can be reframed as “lesson” instead of abuse.',
      'There is no appeals process. There is no second opinion. There is no “maybe they’re wrong.”',
      'All conflict becomes moral: you aren’t disagreeing, you’re “rebelling.”',
      'They can rewrite events in real time and the group will nod, because dissent = sin.'
    ],
    enforcement: [
      'If you question, you get swarmed as “toxic,” “infected,” “under attack,” “dangerous to the flock.”',
      'People are encouraged to defend the leader harder than they’d defend themselves.',
      'Private loyalty tests: “Would you take a hit for me?” “Would you lie for me?” “Would you leave your partner for me?”',
      'Expulsion of skeptics, followed by rewriting their exit story to make them look monstrous.'
    ],
    warpsYou: [
      'You start narrating your own thoughts as “probably wrong, I should ask them what’s real.”',
      'You feel grateful to be corrected, even when the correction is humiliation.',
      'You start repeating the leader’s phrases, tone, posture, facial expressions. You become a clone.',
      'You stop experiencing anger toward the leader. You reroute it inward as shame.'
    ],
    panicSigns: [
      'They never apologize. Ever.',
      'You catch them contradicting themselves and YOU feel guilty.',
      'Members talk about them like a god, a genius, a prophet, a savior, or “the only one who truly sees.”',
      'Anyone who leaves is instantly labeled evil, corrupt, traitor, mentally ill, possessed, or “dead to us.”'
    ],
    resistInside: [
      'In your head, say their name like a normal person, not a title. Bring them back down to human scale.',
      'Write down contradictions the moment they happen. Proof fights gaslight.',
      'Tell yourself: “If this were healthy, I could say ‘I disagree’ without fear of exile or attack.”',
      'Study how they treat people with no value to them. That’s the truth.'
    ]
  },

  {
    id: 'no-contact-world',
    name: 'No-Contact With Outsiders',
    tagline: '“The world is poison. Only we are clean.”',
    angle: 'Total information monopoly.',
    shortDesc:
      'Once you’re in deep, doctrine usually forbids unsupervised contact with family, friends, media, internet, old life.',
    profile:
      'This is where the doctrine stops being ideas and becomes containment. Talking to your mom is “spiritually dangerous.” Consuming outside news is “brainwashing.” Having a private phone is “ego attachment.” Therapy is “attack by the system.” Friends are “temptation.” Privacy is “secrecy,” and secrecy is “betrayal.” They’re not just shaping what you believe now — they’re blocking every alternative input so you literally cannot compare them to normal anymore.',
    officialRule: [
      '“We don’t gossip with outsiders. They’re not ready for this level.”',
      '“Mainstream media is controlled by darkness.”',
      '“Anybody who’s not aligned will try to drag you back into pain.”',
      '“Your old identity is dead now. Stop feeding it.”'
    ],
    hiddenFunction: [
      'They cut you off from rescue.',
      'They make outside reality feel “corrupt,” so you’re scared to go back.',
      'They prevent outsiders from hearing what’s really happening inside.',
      'They force you to rely on the group for everything: money, housing, food, validation, worldview.'
    ],
    enforcement: [
      'Phone checks, bag checks, message checks “for your safety.”',
      'Shame if you “leak internal energy” to outsiders.',
      'Accusations of betrayal if you talk to someone who left.',
      'Group intervention if you show signs of homesickness.'
    ],
    warpsYou: [
      'Your memory of life before them goes dim and distorted because you’re only hearing THEIR retelling of who you used to be.',
      'You start believing you literally cannot survive outside.',
      'You feel nauseous imagining calling someone from “before.” That nausea is installed.',
      'You begin to translate normal healthy boundaries from outsiders as “attacks.”'
    ],
    panicSigns: [
      'You hide calls, emails, or messages like contraband.',
      'The idea of leaving feels like death, not like moving apartments.',
      'You catch yourself defending why isolation is actually noble / spiritual / necessary.',
      'You feel watched 24/7, even when nobody’s in the room.'
    ],
    resistInside: [
      'Memorize at least one safe number outside the group in case you lose your phone.',
      'Keep one tiny connection alive, even if it’s just a 30-second check-in. That’s your lifeline.',
      'Tell yourself in plain language: “They are not the entire world. They WANT me to believe that. That’s strategy.”',
      'Start imagining a future self outside. Imagination is rehearsal.'
    ]
  }

]; // end doctrines[]


/* DOM REFERENCES */
const doctrineListEl = document.getElementById('doctrineList');
const searchInputEl = document.getElementById('searchInput');

const doctrineNameEl = document.getElementById('doctrineName');
const doctrineTaglineEl = document.getElementById('doctrineTagline');
const doctrineAngleEl = document.getElementById('doctrineAngle');
const doctrineProfileEl = document.getElementById('doctrineProfile');
const doctrineSectionsEl = document.getElementById('doctrineSections');

/* ACCORDION TRACKING */
function registerOpen(card) {
  if (!openCards.includes(card)) {
    openCards.push(card);
  }
  if (openCards.length > 2) {
    const toClose = openCards.shift();
    if (toClose && toClose !== card) {
      toClose.classList.remove('open');
    }
  }
}
function unregister(card) {
  openCards = openCards.filter(c => c !== card);
}

/* BUILD SECTION CARD */
function buildSectionCard(title, hint, bullets, open=false) {
  const card = document.createElement('div');
  card.className = 'section-card' + (open ? ' open' : '');

  const headerBtn = document.createElement('button');
  headerBtn.className = 'section-header';

  const labelWrap = document.createElement('div');
  labelWrap.className = 'label';

  const titleLine = document.createElement('div');
  titleLine.className = 'title-line';

  const titleSpan = document.createElement('div');
  titleSpan.className = 'section-title';
  titleSpan.textContent = title;

  const hintSpan = document.createElement('div');
  hintSpan.className = 'hint';
  hintSpan.textContent = hint;

  titleLine.appendChild(titleSpan);
  labelWrap.appendChild(titleLine);
  labelWrap.appendChild(hintSpan);

  const chev = document.createElement('div');
  chev.className = 'chevron';
  chev.textContent = '▶';

  headerBtn.appendChild(labelWrap);
  headerBtn.appendChild(chev);

  const bodyDiv = document.createElement('div');
  bodyDiv.className = 'section-body';

  const ul = document.createElement('ul');
  bullets.forEach(b => {
    const li = document.createElement('li');
    li.innerHTML = b.replace(/^([^:]+):/, '<strong>$1:</strong>');
    ul.appendChild(li);
  });
  bodyDiv.appendChild(ul);

  headerBtn.addEventListener('click', () => {
    const isOpen = card.classList.contains('open');

    if (isOpen) {
      card.classList.remove('open');
      unregister(card);
    } else {
      card.classList.add('open');
      registerOpen(card);
    }
  });

  card.appendChild(headerBtn);
  card.appendChild(bodyDiv);

  if (open) {
    registerOpen(card);
  }

  return card;
}

/* RENDER SIDEBAR LIST */
function renderDoctrineList(filterText = '') {
  const f = filterText.trim().toLowerCase();
  doctrineListEl.innerHTML = '';

  doctrines
    .filter(d => {
      if (!f) return true;
      const haystack = [
        d.name,
        d.shortDesc,
        d.tagline,
        d.angle
      ].join(' ').toLowerCase();
      return haystack.includes(f);
    })
    .forEach(d => {
      const item = document.createElement('div');
      item.className = 'doctrine-item';
      item.setAttribute('data-id', d.id);

      const line1 = document.createElement('div');
      line1.className = 'doctrine-line1';

      const nameSpan = document.createElement('div');
      nameSpan.className = 'doctrine-name';
      nameSpan.textContent = d.name;

      const tagSpan = document.createElement('div');
      tagSpan.className = 'doctrine-tag';
      tagSpan.textContent = d.tagline;

      line1.appendChild(nameSpan);
      line1.appendChild(tagSpan);

      const descDiv = document.createElement('div');
      descDiv.className = 'doctrine-desc';
      descDiv.textContent = d.shortDesc;

      item.appendChild(line1);
      item.appendChild(descDiv);

      item.addEventListener('click', () => {
        showDoctrine(d.id);
      });

      doctrineListEl.appendChild(item);
    });

  highlightActive(currentDoctrineId);
}

/* SHOW SELECTED DOCTRINE IN MAIN PANEL */
function showDoctrine(id) {
  const d = doctrines.find(x => x.id === id);
  if (!d) return;

  currentDoctrineId = id;

  doctrineNameEl.textContent = d.name;
  doctrineTaglineEl.textContent = d.tagline;
  doctrineAngleEl.textContent = d.angle;
  doctrineProfileEl.textContent = d.profile;

  doctrineSectionsEl.innerHTML = '';
  openCards = [];

  const sectionsData = [
    { title: 'Official Rule',       hint: 'What they tell you it means',             arr: d.officialRule || [] },
    { title: 'Hidden Function',     hint: 'Why the rule actually exists',            arr: d.hiddenFunction || [] },
    { title: 'Enforcement',         hint: 'How they keep you in line',               arr: d.enforcement || [] },
    { title: 'How It Warps You',    hint: 'Psychological / identity damage',        arr: d.warpsYou || [] },
    { title: 'When To Panic',       hint: 'Signs this is no longer “belief,” it’s cage-building', arr: d.panicSigns || [] },
    { title: 'How To Resist Inside',hint: 'Survival moves before you’re fully out', arr: d.resistInside || [] },
  ];

  sectionsData.forEach((block, idx) => {
    if (!block.arr || block.arr.length === 0) return;
    const card = buildSectionCard(
      block.title,
      block.hint,
      block.arr,
      (idx === 0 || idx === 1)
    );
    doctrineSectionsEl.appendChild(card);
  });

  highlightActive(id);

  document.getElementById('main').scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}

/* HIGHLIGHT ACTIVE IN SIDEBAR */
function highlightActive(id) {
  const items = doctrineListEl.querySelectorAll('.doctrine-item');
  items.forEach(el => {
    if (el.getAttribute('data-id') === id) {
      el.classList.add('active');
    } else {
      el.classList.remove('active');
    }
  });
}

/* SEARCH HOOK */
searchInputEl.addEventListener('input', (e) => {
  renderDoctrineList(e.target.value);
});

/* INIT */
renderDoctrineList('');
if (doctrines.length > 0) {
  showDoctrine(doctrines[0].id);
}
</script>

</body>
</html>
