<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>CULT MANUAL: Enforcement</title>

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Inter:wght@400;500&display=swap" rel="stylesheet"/>

<style>
:root {
  --bg: #0a0705;
  --panel: #141110;
  --panel-light: #1d1815;
  --accent: #e8c66a;        /* candle gold */
  --accent-soft: rgba(232,198,106,0.15);
  --accent-glow: 0 0 12px rgba(232,198,106,0.5);
  --blood: #681919;         /* ritual red */
  --text: #f5f2e8;
  --muted: #9a9382;
  --line: #3a2f22;
  --radius-lg: 18px;
  --radius-md: 10px;
  --radius-sm: 6px;
  --font-head: 'Cinzel', serif;
  --font-body: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

/* BASE */
* {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
}

body {
  margin: 0;
  background:
    radial-gradient(circle at 20% 15%, rgba(80,40,20,0.28) 0%, rgba(0,0,0,0) 70%),
    radial-gradient(circle at 80% 80%, rgba(232,198,106,0.08) 0%, rgba(0,0,0,0) 70%),
    #000000;
  color: var(--text);
  font-family: var(--font-body);
  display: flex;
  flex-direction: row;
  min-height: 100vh;
  overflow-x: hidden;
  overflow-y: auto;
  line-height: 1.45;
  padding-top: 58px;
}

/* TOP NAV BAR */
.top-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: rgba(10,7,5,0.92);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border-bottom: 1px solid rgba(255,255,255,0.07);
  z-index: 9999;
  box-shadow: 0 20px 30px rgba(0,0,0,0.95);
  font-family: var(--font-head);
}

.nav-inner {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 14px 20px;
  padding: 12px 16px;
  max-width: 1400px;
  margin: 0 auto;
}

.nav-brand {
  color: var(--accent);
  font-weight: 600;
  font-size: 0.9rem;
  letter-spacing: 0.06em;
  text-shadow: 0 0 8px rgba(232,198,106,0.6), 0 0 24px rgba(232,198,106,0.4);
  white-space: nowrap;
}

.nav-links {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 12px 16px;
  font-size: 0.7rem;
  letter-spacing: 0.04em;
}

.nav-link {
  color: var(--text);
  text-decoration: none;
  padding-bottom: 2px;
  border-bottom: 2px solid transparent;
}
.nav-link.active {
  color: var(--accent);
  border-bottom-color: var(--accent);
  text-shadow: 0 0 12px rgba(232,198,106,0.6);
}
.nav-link:hover {
  color: var(--accent);
  text-shadow: 0 0 12px rgba(232,198,106,0.6);
}

/* SIDEBAR */
#sidebar {
  width: 270px;
  background:
    radial-gradient(circle at 0% 0%, rgba(104,25,25,0.35) 0%, rgba(0,0,0,0) 60%),
    radial-gradient(circle at 100% 0%, rgba(232,198,106,0.07) 0%, rgba(0,0,0,0) 70%),
    #0a0705;
  border-right: 1px solid var(--line);
  display: flex;
  flex-direction: column;
  box-shadow: 8px 0 24px rgba(0,0,0,0.9);
  position: relative;
  z-index: 10;
}

.sidebar-header {
  padding: 20px 16px 16px;
  border-bottom: 1px solid rgba(255,255,255,0.07);
  background: radial-gradient(circle at 20% 20%, rgba(232,198,106,0.12) 0%, rgba(0,0,0,0) 70%);
}

.app-title {
  font-family: var(--font-head);
  font-size: 1rem;
  font-weight: 600;
  letter-spacing: 0.06em;
  color: var(--text);
  display: flex;
  flex-direction: column;
  gap: 4px;
  text-shadow: 0 0 6px rgba(232,198,106,0.5);
}

.app-mainline {
  display: flex;
  flex-wrap: wrap;
  column-gap: 8px;
  row-gap: 4px;
  align-items: baseline;
}

.app-mainline span:first-child {
  color: var(--text);
}

.section-subtitle {
  color: var(--accent);
  font-size: 0.7rem;
  font-weight: 500;
  text-shadow: 0 0 8px rgba(232,198,106,0.6);
  letter-spacing: 0.07em;
  white-space: nowrap;
}

.app-sub {
  font-size: 0.7rem;
  font-weight: 400;
  color: var(--muted);
  line-height: 1.4;
  margin-top: 6px;
}

.search-wrap {
  margin-top: 16px;
  position: relative;
}

.search-wrap input {
  width: 100%;
  background: rgba(0,0,0,0.4);
  border: 1px solid var(--line);
  border-radius: var(--radius-md);
  color: var(--text);
  font-size: 0.8rem;
  padding: 9px 10px 9px 30px;
  outline: none;
  box-shadow:
    inset 0 0 10px rgba(232,198,106,0.25),
    0 0 12px rgba(104,25,25,0.4);
}
.search-wrap input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 8px rgba(232,198,106,0.6),
              inset 0 0 10px rgba(232,198,106,0.3),
              0 0 18px rgba(104,25,25,0.5);
}
.search-icon {
  position: absolute;
  left: 9px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.7rem;
  color: var(--accent);
  text-shadow: 0 0 12px rgba(232,198,106,0.6);
  pointer-events: none;
}

/* ENFORCER LIST */
.enforcer-list {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 8px 0 80px;
  scrollbar-width: thin;
  scrollbar-color: var(--accent) #000;
}
.enforcer-list::-webkit-scrollbar {
  width: 6px;
}
.enforcer-list::-webkit-scrollbar-track {
  background: #000;
}
.enforcer-list::-webkit-scrollbar-thumb {
  background: var(--accent);
  border-radius: 3px;
  box-shadow: 0 0 10px rgba(232,198,106,0.7);
}

.enforcer-item {
  padding: 10px 16px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  cursor: pointer;
  position: relative;
  transition: background 0.12s;
  display: flex;
  flex-direction: column;
}
.enforcer-item:hover {
  background: rgba(232,198,106,0.08);
}
.enforcer-item.active {
  background: rgba(232,198,106,0.16);
  box-shadow: inset 0 0 12px rgba(232,198,106,0.6);
}

/* stacked title+pill */
.enforcer-line1 {
  display: block;
}

.enforcer-name {
  font-family: var(--font-head);
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text);
  letter-spacing: 0.04em;
  display: block;
  margin-bottom: 6px;
  max-width: 100%;
  word-break: break-word;
  text-shadow: 0 0 8px rgba(104,25,25,0.6);
}

.enforcer-tag {
  background: var(--accent);
  color: #000;
  font-size: 0.6rem;
  font-weight: 600;
  line-height: 1.2;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  white-space: nowrap;
  box-shadow:
    0 0 8px rgba(232,198,106,0.6),
    0 0 20px rgba(104,25,25,0.6);
  margin-bottom: 6px;
  display: inline-block;
  max-width: 100%;
}

.enforcer-desc {
  font-size: 0.7rem;
  font-weight: 400;
  color: var(--muted);
  line-height: 1.3;
  word-break: break-word;
}

/* MAIN PANEL */
#main {
  flex: 1;
  background:
    radial-gradient(circle at 80% 20%, rgba(232,198,106,0.07) 0%, rgba(0,0,0,0) 70%),
    radial-gradient(circle at 10% 90%, rgba(104,25,25,0.22) 0%, rgba(0,0,0,0) 70%),
    #0a0705;
  position: relative;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: thin;
  scrollbar-color: var(--accent) #000;
}
#main::-webkit-scrollbar {
  width: 8px;
}
#main::-webkit-scrollbar-thumb {
  background: var(--accent);
  border-radius: 4px;
  box-shadow: 0 0 10px rgba(232,198,106,0.7);
}

.main-inner {
  max-width: 900px;
  padding: 24px clamp(16px,2vw,24px) 120px;
  margin: 0 auto;
  position: relative;
  color: var(--text);
}

/* HEADER CARD */
#enforcerHeader {
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: var(--radius-lg);
  box-shadow:
    0 30px 60px rgba(0,0,0,0.95),
    0 0 60px rgba(232,198,106,0.25),
    0 0 120px rgba(104,25,25,0.4);
  position: relative;
  padding: 20px 20px 16px;
}

.enforcer-title-row {
  display: flex;
  flex-wrap: wrap;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
}

#enforcerName {
  font-family: var(--font-head);
  font-size: 1.25rem;
  font-weight: 600;
  letter-spacing: 0.06em;
  color: var(--text);
  text-shadow:
    0 0 10px rgba(232,198,106,0.6),
    0 0 30px rgba(104,25,25,0.7);
  margin: 0;
  line-height: 1.2;
}

#enforcerTagline {
  font-size: 0.7rem;
  color: #000;
  background: var(--accent);
  padding: 4px 8px;
  border: 1px solid var(--accent);
  border-radius: var(--radius-sm);
  line-height: 1.3;
  font-weight: 600;
  text-shadow: none;
  box-shadow:
    0 0 20px rgba(232,198,106,0.5),
    0 0 40px rgba(104,25,25,0.6);
  white-space: nowrap;
  max-width: 100%;
}

#enforcerAngle {
  font-size: 0.7rem;
  color: var(--muted);
  font-style: italic;
  line-height: 1.4;
}

#enforcerProfile {
  margin-top: 16px;
  font-size: 0.8rem;
  color: var(--text);
  line-height: 1.5;
}

/* ACCORDION SECTIONS */
.section-card {
  margin-top: 20px;
  background: var(--panel-light);
  border: 1px solid var(--line);
  border-radius: var(--radius-md);
  overflow: hidden;
  box-shadow:
    0 20px 40px rgba(0,0,0,0.9),
    0 0 40px rgba(104,25,25,0.3);
}

.section-header {
  width: 100%;
  background: linear-gradient(to right, rgba(232,198,106,0.12) 0%, rgba(0,0,0,0) 80%);
  color: var(--text);
  border: 0;
  border-bottom: 1px solid rgba(255,255,255,0.06);
  font-family: var(--font-head);
  font-weight: 600;
  font-size: 0.8rem;
  text-align: left;
  line-height: 1.4;
  letter-spacing: 0.06em;
  padding: 14px 16px;
  position: relative;
  cursor: pointer;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  text-shadow:
    0 0 8px rgba(232,198,106,0.5),
    0 0 20px rgba(104,25,25,0.6);
}
.section-header .label {
  display: flex;
  flex-direction: column;
  gap: 3px;
}
.section-header .title-line {
  display: flex;
  align-items: baseline;
  gap: 8px;
}
.section-header .section-title {
  color: var(--text);
}
.section-header .hint {
  color: var(--muted);
  font-family: var(--font-body);
  font-size: 0.6rem;
  font-weight: 400;
  text-shadow: none;
}
.section-header .chevron {
  font-size: 0.8rem;
  line-height: 1;
  color: var(--accent);
  text-shadow: 0 0 10px rgba(232,198,106,0.6), 0 0 20px rgba(104,25,25,0.6);
  transition: transform 0.15s;
}
.section-card.open .section-header .chevron {
  transform: rotate(90deg);
}

.section-body {
  display: none;
  padding: 16px;
  font-size: 0.8rem;
  color: var(--text);
  line-height: 1.5;
}
.section-card.open .section-body {
  display: block;
  background:
    radial-gradient(circle at 10% 0%, rgba(232,198,106,0.07) 0%, transparent 70%),
    radial-gradient(circle at 100% 0%, rgba(104,25,25,0.25) 0%, transparent 70%);
}
.section-body ul {
  margin: 0;
  padding-left: 18px;
}
.section-body li {
  margin-bottom: 10px;
  color: var(--text);
}
.section-body li strong {
  color: var(--accent);
  font-weight: 600;
  text-shadow:
    0 0 12px rgba(232,198,106,0.5),
    0 0 22px rgba(104,25,25,0.6);
}

/* FOOTER NOTE */
.footer-note {
  margin-top: 32px;
  font-size: 0.65rem;
  line-height: 1.4;
  color: var(--muted);
  text-align: center;
  padding-bottom: 60px;
  max-width: 640px;
  margin-left: auto;
  margin-right: auto;
  border-top: 1px solid rgba(255,255,255,0.05);
  padding-top: 20px;
  font-style: italic;
}

/* RESPONSIVE */
@media (max-width: 750px) {
  #sidebar {
    width: 220px;
  }
  #enforcerName {
    font-size: 1.1rem;
  }
  #enforcerTagline {
    font-size: 0.7rem;
  }
}
@media (max-width: 600px) {
  body {
    flex-direction: column;
  }
  #sidebar {
    width: 100%;
    max-height: 40vh;
    border-right: 0;
    border-bottom: 1px solid var(--line);
  }
  #main {
    flex: 1;
  }
  .enforcer-list {
    max-height: calc(40vh - 130px);
  }
  .enforcer-title-row {
    flex-direction: column;
    align-items: flex-start;
  }
  #enforcerTagline {
    white-space: normal;
  }
}
</style>
</head>
<body>

<!-- TOP NAV -->
<nav class="top-nav">
  <div class="nav-inner">
    <div class="nav-brand">CULT MANUAL</div>
    <div class="nav-links">
      <a class="nav-link" href="index.html">Overview / Indoctrination</a>
      <a class="nav-link" href="recruitment.html">Recruitment</a>
      <a class="nav-link" href="doctrine.html">Doctrine / Purity</a>
      <a class="nav-link active" href="enforcement.html">Enforcement</a>
      <a class="nav-link" href="exit.html">Exit Cost</a>
    </div>
  </div>
</nav>

<!-- SIDEBAR -->
<aside id="sidebar">
  <div class="sidebar-header">
    <div class="app-title">
      <div class="app-mainline">
        <span>ENFORCEMENT</span>
        <span class="section-subtitle">FEAR / HUMILIATION / SILENCE</span>
      </div>
      <div class="section-subtitle" style="color:var(--muted);text-shadow:none;">
        Every cult has cops. They just call them “accountability,” “elders,” “inner council.”
      </div>
    </div>

    <div class="app-sub">
      Control isn’t real until it can punish. These are the punishment systems.
    </div>

    <div class="search-wrap">
      <span class="search-icon">🔍</span>
      <input id="searchInput" type="text" placeholder="Search enforcement roles..." />
    </div>
  </div>

  <div id="enforcerList" class="enforcer-list">
    <!-- JS fills -->
  </div>
</aside>

<!-- MAIN -->
<main id="main">
  <div class="main-inner">
    <section id="enforcerHeader">
      <div class="enforcer-title-row">
        <h1 id="enforcerName">Loading...</h1>
        <div id="enforcerTagline"></div>
      </div>
      <div id="enforcerAngle"></div>
      <div id="enforcerProfile"></div>
    </section>

    <div id="enforcerSections">
      <!-- JS accordion sections -->
    </div>

    <div class="footer-note">
      You are not “overreacting.” You are being governed.
    </div>
  </div>
</main>

<script>
/*
Enforcer Object Model:
{
  id: 'confession-circle',
  name: 'Public Confession Circle',
  tagline: '“Share your darkness so we can help you”',
  angle: 'Shame extraction ritual posing as healing.',
  shortDesc: 'They get you to hand them blackmail.',
  profile: 'Long text...',
  howItWorks: [...],
  whyItExists: [...],
  howItBreaksYou: [...],
  whoRunsIt: [...],
  dangerFlags: [...],
  howToSurviveIt: [...]
}
*/

let openCards = [];
let currentEnforcerId = null;

const enforcers = [
  {
    id: 'confession-circle',
    name: 'Public Confession Circle',
    tagline: '“Share your darkness so we can help you”',
    angle: 'Shame extraction ritual disguised as healing.',
    shortDesc:
      'It’s sold like therapy. It’s not therapy. It’s evidence gathering.',
    profile:
      'Everyone sits in a circle. You’re asked to “be radically honest,” to “surrender pride,” to “own your shadow,” to “tear down your walls.” You speak something raw: guilt, fear, sex history, betrayal, secrets, crimes, self-harm, rage toward leadership. The circle nods, cries, hugs. You feel released. You also just handed them leverage forever. From now on, any attempt to leave or challenge them can be answered with, “We know what you did. Do you want that story public?”',
    howItWorks: [
      'They ask for total emotional nudity under the banner of “healing.”',
      'They demand you confess to “ways you’ve failed the group” even if you haven’t.',
      'They require tears. If you don’t cry, you’re “hiding.”',
      'You’re encouraged to name others who “triggered” you, which turns into tattling.'
    ],
    whyItExists: [
      'Once you’ve bared your worst moment in front of them, you’re less likely to walk away, because you’re ashamed.',
      'They create mutual destruction: everyone in the circle is now holding everyone else’s dirt, so nobody trusts anyone outside the group.',
      'They can spin any later complaint you raise as “projection from your unresolved darkness.”',
      'It lets them profile who might rebel.'
    ],
    howItBreaksYou: [
      'You start believing you owe them your secrets.',
      'You stop believing you deserve privacy.',
      'You begin to think your pain is “causing drama” instead of being evidence you’re being abused.',
      'You learn to perform suffering on command so they’ll think you’re still loyal.'
    ],
    whoRunsIt: [
      'Usually a senior member (not always the top leader) who acts like “loving parent.”',
      'Someone skilled at fake empathy + surgical shaming.',
      'Often a person who will later be the one to say “I know what you’re capable of when you get dark. Don’t make me remind people.”'
    ],
    dangerFlags: [
      'Confessions are written down or recorded “for accountability.”',
      'They tell you not to repeat what was said outside the circle (“house business stays in the house”).',
      'You’re expected to confess weekly, like payment.',
      'Not crying = punishment.'
    ],
    howToSurviveIt: [
      'Never confess anything that can get you jailed, blackmailed, or cut off from your family.',
      'Answer in feelings (“I feel ashamed,” “I feel scared I’m not enough”) instead of details (“I did X with Y on Z date”).',
      'Notice who’s collecting, not who’s crying.',
      'Remember: a real therapist doesn’t threaten to “share your journey” with the entire room if you misbehave.'
    ]
  },

  {
    id: 'sleep-control',
    name: 'Sleep and Food Control',
    tagline: '“Discomfort breaks ego”',
    angle: 'Wear you down until you stop resisting.',
    shortDesc:
      'If you’re hungry and exhausted, you’ll agree to almost anything just to get it over with.',
    profile:
      'Classic enforcement move: restrict sleep, micromanage nutrition, interrupt rest, keep you always a little off-balance. You become slower, more emotional, easier to steer, less likely to analyze. They’ll call it “fasting,” “discipline,” “all-night prayer,” “deep work,” “leveling up,” “purification,” “detox,” “boot camp,” “intensive.” What it really is: torture Lite.',
    howItWorks: [
      'Mandatory late-night meetings or “vigil” sessions that last until sunrise.',
      'Waking you up multiple times to “check in on your alignment.”',
      'Food restricted, replaced with group-approved meals, shakes, powders, or literal starvation framed as “cleansing.”',
      'Assigning punishing schedules so you never have quiet time alone.'
    ],
    whyItExists: [
      'Sleep debt destroys critical thinking.',
      'Low blood sugar makes you emotional and suggestible, which they call “spiritually soft.”',
      'Exhaustion bonds you to the group because only they “understand this level of sacrifice.”',
      'You’re too tired to plan escape.'
    ],
    howItBreaksYou: [
      'You cry easier, so they can frame you as “having a breakthrough.”',
      'You physically shake in meetings and they call that “the spirit moving.”',
      'You start begging for approval because approval = maybe rest.',
      'You forget what normal feels like, so abuse becomes baseline.'
    ],
    whoRunsIt: [
      'Logistics people. House managers. “Discipleship leads.” The ones who control the schedule.',
      'The enforcers who act like drill sergeants in the name of “discipline.”',
      'Sometimes the entire senior circle, who conveniently get full meals and naps while everyone else “fasts.”'
    ],
    dangerFlags: [
      'You get punished for sleeping.',
      'You’re not allowed to eat without permission.',
      'Passing out is framed as courage.',
      'People start having medical episodes and leadership calls it “purging weakness.”'
    ],
    howToSurviveIt: [
      'Hide calories. Protein bars, sugar packets, anything.',
      'Nap in stolen minutes. Lock a bathroom stall and breathe low and slow.',
      'Drink water constantly. Dehydration makes control ten times easier.',
      'Tell yourself, over and over: “My thinking is foggy because they’re doing this to me on purpose.” Naming strategy = regaining control.'
    ]
  },

  {
    id: 'isolation-purge',
    name: 'Isolation / Purge Ritual',
    tagline: '“You’re a danger to the energy right now”',
    angle: 'Social execution dressed up as spiritual quarantine.',
    shortDesc:
      'They cut you off “for everyone’s safety,” which really means “to break you until you crawl back obedient.”',
    profile:
      'The group suddenly turns on you: no one makes eye contact, no one speaks unless to correct you, you get physically separated, you lose shared meals, you sleep apart. They call it “time to reflect,” “realignment,” “heart check,” “cleansing your ego,” “cooling down toxicity.” What it is: soft solitary, psychological waterboarding.',
    howItWorks: [
      'You’re labeled “negative,” “rebellious,” “unsafe,” “infected,” “under attack,” “out of alignment.”',
      'Friends are told contact will “enable your darkness.”',
      'You’re forced to write apology letters or “testimonies of repentance.”',
      'You’re told you can come back to the group “after you prove you’re humble.”'
    ],
    whyItExists: [
      'Fear. Everyone else watches you get iced out and thinks, “I’d better behave.”',
      'You become desperate for re-acceptance, so you’ll say anything.',
      'It erases dissent without having to physically kick you out, which might create sympathy.',
      'It lets them rewrite: “Nobody punished you, you chose distance by choosing pride.”'
    ],
    howItBreaksYou: [
      'Silence becomes pain. Humans are pack animals. Rejection hurts like physical injury.',
      'You begin to believe you actually ARE dangerous, unclean, corrupted.',
      'You’ll start apologizing for things you didn’t do just to make the cold stop.',
      'You start thinking of re-acceptance as love instead of as conditional compliance.'
    ],
    whoRunsIt: [
      'Inner circle loyalists who already proved they’ll drop empathy on command.',
      'People who smiled to your face yesterday and call you “virus” today.',
      'Leadership signs off, even if they pretend hands-off.'
    ],
    dangerFlags: [
      'The group tells others not to comfort you “or you’ll get dragged down too.”',
      'They pressure you to publicly confess sins you didn’t commit just to be allowed back.',
      'You’re told you can’t sleep, eat, or speak in the main space.',
      'You start thinking about self-harm just to make someone finally look at you again.'
    ],
    howToSurviveIt: [
      'Remind yourself: “This is a tactic. I am not poison. They are manufacturing exile to force obedience.”',
      'If you can contact ANYONE outside, do it and say “I am being isolated.” Use those exact words.',
      'Document dates and treatment. Isolation is evidence.',
      'If you feel urges to hurt yourself just to get attention: that is not proof you’re unstable. That is proof this is torture. Prioritize staying alive long enough to get out.'
    ]
  },

  {
    id: 'exit-threats',
    name: 'Exit Threats & Smear Campaigns',
    tagline: '“If you leave, we’ll destroy you”',
    angle: 'They make leaving feel more dangerous than staying.',
    shortDesc:
      'The punishment that activates when you even THINK about walking.',
    profile:
      'Every cult advertises “we’re a family.” Leaving any family hurts. But cults weaponize that pain. They threaten to expose your secrets. They threaten to take your partner / kids / housing. They threaten legal action. They threaten physical violence. They threaten spiritual doom (“you’ll get cancer,” “you’ll relapse,” “demons will eat you,” “you’ll die in a car crash without our covering”). They also rewrite your story to everyone still inside so you become the demon they all fear becoming.',
    howItWorks: [
      'As soon as you pull away, leadership starts telling others you were “unstable,” “violent,” “abusive,” “stalking,” “stealing,” “lying,” “possessed,” whatever fits.',
      'They contact your friends/family first so you look unhinged when you try to tell your side.',
      'They accuse you of the exact things they did.',
      'They float “legal consequences” to scare you quiet even when they have no case.'
    ],
    whyItExists: [
      'Retaliation discourages other people from leaving.',
      'If they smear you first, anything you reveal later sounds like “bitter lies.”',
      'They keep the narrative that “nobody leaves healthy — only traitors leave.”',
      'They get revenge for losing control of you.'
    ],
    howItBreaksYou: [
      'You feel like you can’t tell anyone what happened because you’ll sound like a cartoon villain.',
      'You’re terrified your own secrets (the ones they squeezed out of you in “healing work”) will be dropped on your job or family.',
      'You start doubting you’ll survive outside.',
      'You consider going back just to stop the bleed.'
    ],
    whoRunsIt: [
      'Top leadership + loyal mouthpieces.',
      '“Legal arm,” “media arm,” “PR team,” “security.”',
      'Sometimes your ex-partner from inside, weaponized as a witness against you.'
    ],
    dangerFlags: [
      'They say, “You’ll lose everyone you love if you walk.”',
      'They preemptively tell people you “might lash out,” planting fear.',
      'They threaten custody, employment, safety, reputation in one breath like it’s casual.',
      'You catch them rewriting your timeline and motives to make you look predatory.'
    ],
    howToSurviveIt: [
      'Before you go, quietly gather ID, money, meds, proof of anything illegal THEY did.',
      'Tell at least one trusted outsider: “If they smear me, please know it’s retaliation.” That seed matters later.',
      'Understand: the storm is worst at the edge. Once you’re fully out and stable, their reach drops hard.',
      'You did not “betray the family.” You ended a hostage situation.'
    ]
  }

]; // end enforcers[]


/* DOM REFS */
const enforcerListEl = document.getElementById('enforcerList');
const searchInputEl = document.getElementById('searchInput');

const enforcerNameEl = document.getElementById('enforcerName');
const enforcerTaglineEl = document.getElementById('enforcerTagline');
const enforcerAngleEl = document.getElementById('enforcerAngle');
const enforcerProfileEl = document.getElementById('enforcerProfile');
const enforcerSectionsEl = document.getElementById('enforcerSections');

/* ACCORDION TRACKING */
function registerOpen(card) {
  if (!openCards.includes(card)) {
    openCards.push(card);
  }
  if (openCards.length > 2) {
    const toClose = openCards.shift();
    if (toClose && toClose !== card) {
      toClose.classList.remove('open');
    }
  }
}
function unregister(card) {
  openCards = openCards.filter(c => c !== card);
}

/* BUILD SECTION CARD */
function buildSectionCard(title, hint, bullets, open=false) {
  const card = document.createElement('div');
  card.className = 'section-card' + (open ? ' open' : '');

  const headerBtn = document.createElement('button');
  headerBtn.className = 'section-header';

  const labelWrap = document.createElement('div');
  labelWrap.className = 'label';

  const titleLine = document.createElement('div');
  titleLine.className = 'title-line';

  const titleSpan = document.createElement('div');
  titleSpan.className = 'section-title';
  titleSpan.textContent = title;

  const hintSpan = document.createElement('div');
  hintSpan.className = 'hint';
  hintSpan.textContent = hint;

  titleLine.appendChild(titleSpan);
  labelWrap.appendChild(titleLine);
  labelWrap.appendChild(hintSpan);

  const chev = document.createElement('div');
  chev.className = 'chevron';
  chev.textContent = '▶';

  headerBtn.appendChild(labelWrap);
  headerBtn.appendChild(chev);

  const bodyDiv = document.createElement('div');
  bodyDiv.className = 'section-body';

  const ul = document.createElement('ul');
  bullets.forEach(b => {
    const li = document.createElement('li');
    li.innerHTML = b.replace(/^([^:]+):/, '<strong>$1:</strong>');
    ul.appendChild(li);
  });
  bodyDiv.appendChild(ul);

  headerBtn.addEventListener('click', () => {
    const isOpen = card.classList.contains('open');

    if (isOpen) {
      card.classList.remove('open');
      unregister(card);
    } else {
      card.classList.add('open');
      registerOpen(card);
    }
  });

  card.appendChild(headerBtn);
  card.appendChild(bodyDiv);

  if (open) {
    registerOpen(card);
  }

  return card;
}

/* RENDER SIDEBAR LIST */
function renderEnforcerList(filterText = '') {
  const f = filterText.trim().toLowerCase();
  enforcerListEl.innerHTML = '';

  enforcers
    .filter(e => {
      if (!f) return true;
      const haystack = [
        e.name,
        e.shortDesc,
        e.tagline,
        e.angle
      ].join(' ').toLowerCase();
      return haystack.includes(f);
    })
    .forEach(e => {
      const item = document.createElement('div');
      item.className = 'enforcer-item';
      item.setAttribute('data-id', e.id);

      const line1 = document.createElement('div');
      line1.className = 'enforcer-line1';

      const nameSpan = document.createElement('div');
      nameSpan.className = 'enforcer-name';
      nameSpan.textContent = e.name;

      const tagSpan = document.createElement('div');
      tagSpan.className = 'enforcer-tag';
      tagSpan.textContent = e.tagline;

      line1.appendChild(nameSpan);
      line1.appendChild(tagSpan);

      const descDiv = document.createElement('div');
      descDiv.className = 'enforcer-desc';
      descDiv.textContent = e.shortDesc;

      item.appendChild(line1);
      item.appendChild(descDiv);

      item.addEventListener('click', () => {
        showEnforcer(e.id);
      });

      enforcerListEl.appendChild(item);
    });

  highlightActive(currentEnforcerId);
}

/* SHOW SELECTED ENFORCER IN MAIN PANEL */
function showEnforcer(id) {
  const e = enforcers.find(x => x.id === id);
  if (!e) return;

  currentEnforcerId = id;

  enforcerNameEl.textContent = e.name;
  enforcerTaglineEl.textContent = e.tagline;
  enforcerAngleEl.textContent = e.angle;
  enforcerProfileEl.textContent = e.profile;

  enforcerSectionsEl.innerHTML = '';
  openCards = [];

  const sectionsData = [
    { title: 'How It Works',        hint: 'Step-by-step mechanics of control',             arr: e.howItWorks || [] },
    { title: 'Why They Do It',      hint: 'The real objective behind the ritual',          arr: e.whyItExists || [] },
    { title: 'How It Breaks You',   hint: 'Psychological/physical damage to you',          arr: e.howItBreaksYou || [] },
    { title: 'Who Runs It',         hint: 'Which roles become the cops',                   arr: e.whoRunsIt || [] },
    { title: 'Red Flag Conditions', hint: 'When you know it’s turned into pure coercion',  arr: e.dangerFlags || [] },
    { title: 'How To Survive It',   hint: 'Practical in-place survival moves',             arr: e.howToSurviveIt || [] },
  ];

  sectionsData.forEach((block, idx) => {
    if (!block.arr || block.arr.length === 0) return;
    const card = buildSectionCard(
      block.title,
      block.hint,
      block.arr,
      (idx === 0 || idx === 1)
    );
    enforcerSectionsEl.appendChild(card);
  });

  highlightActive(id);

  document.getElementById('main').scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}

/* HIGHLIGHT ACTIVE IN SIDEBAR */
function highlightActive(id) {
  const items = enforcerListEl.querySelectorAll('.enforcer-item');
  items.forEach(el => {
    if (el.getAttribute('data-id') === id) {
      el.classList.add('active');
    } else {
      el.classList.remove('active');
    }
  });
}

/* SEARCH HOOK */
searchInputEl.addEventListener('input', (e) => {
  renderEnforcerList(e.target.value);
});

/* INIT */
renderEnforcerList('');
if (enforcers.length > 0) {
  showEnforcer(enforcers[0].id);
}
</script>

</body>
</html>
