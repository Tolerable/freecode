<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Print Loop — A Meta-Aware Walkthrough for 3D Printing Obsession</title>
<style>
  :root{
    --bg:#0f1724; --card:#071028; --muted:#a9b6c3; --accent:#5ce1c4; --accent-2:#7fb3ff;
    --warn:#ffb86b; --danger:#ff6b6b;
    --maxw:1200px;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    color-scheme: dark;
  }
  html,body{height:100%;margin:0;background:
    linear-gradient(180deg,#061025 0%, #071427 60%); color:#e6eef6;}
  .container{max-width:var(--maxw);margin:32px auto;padding:28px;display:grid;gap:18px;
    grid-template-columns: 1fr 360px; align-items:start;}
  @media (max-width:980px){ .container{grid-template-columns:1fr;padding:18px} }
  header{grid-column:1/-1;display:flex;align-items:center;gap:16px}
  .logo{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,#06303c,#0f5a4a);
    display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--accent);box-shadow:0 8px 30px rgba(0,0,0,0.6)}
  h1{margin:0;font-size:20px}
  .subtitle{color:var(--muted);font-size:13px;margin-top:2px}
  main.card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:20px;border-radius:12px;
    border:1px solid rgba(255,255,255,0.02);box-shadow:0 10px 40px rgba(2,6,23,0.6);min-height:520px}
  aside.card{background:transparent;padding:0;border:none}
  .section{margin-bottom:18px}
  .lead{color:var(--muted);line-height:1.45}
  .split{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .tone-pill{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.02);
    color:var(--muted);font-size:13px;margin-right:8px;cursor:pointer;border:1px solid rgba(255,255,255,0.02)}
  .active{background:linear-gradient(90deg, rgba(92,225,196,0.12), rgba(127,179,255,0.06));color:var(--accent)}
  .block{background:rgba(255,255,255,0.02);padding:14px;border-radius:10px}
  .muted{color:var(--muted);font-size:13px}
  .inner-voice{background:#04111a;padding:10px;border-left:4px solid rgba(92,225,196,0.14);border-radius:8px;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace}
  .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .btn{background:var(--accent);color:#052923;border:none;padding:9px 12px;border-radius:10px;cursor:pointer;font-weight:700}
  .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--accent-2);padding:8px 10px;border-radius:8px}
  .small{font-size:13px;color:var(--muted)}
  .quiz .q{margin-bottom:10px}
  label{font-size:13px;display:block;margin-bottom:6px}
  select,input[type="number"]{width:100%;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:inherit}
  .score{padding:12px;border-radius:8px;margin-top:8px}
  .low{background:rgba(92,225,196,0.06);color:var(--accent)}
  .med{background:rgba(255,184,106,0.06);color:var(--warn)}
  .high{background:rgba(255,106,106,0.06);color:var(--danger)}
  .plan{background:linear-gradient(180deg, rgba(127,179,255,0.04), rgba(92,225,196,0.03));padding:12px;border-radius:10px}
  footer{grid-column:1/-1;color:var(--muted);font-size:13px;display:flex;justify-content:space-between;align-items:center;margin-top:8px}
  .sticky{position:sticky;top:28px}
  .help-list{display:grid;gap:8px;margin-top:10px}
  .help-item{background:rgba(255,255,255,0.02);padding:10px;border-radius:8px}
  a.link{color:var(--accent-2);text-decoration:none}
  /* breathing room adjustments for wide screens */
  @media (min-width:1400px){
    .container{max-width:1400px}
    main.card{padding:32px}
  }
</style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">3D</div>
      <div>
        <h1>Print Loop — a meta-aware walkthrough</h1>
        <div class="subtitle">A single page that says what the hobbyist’s brain is thinking — clinical facts, hard truth, and humor — all in one place to help them see the loop and step out.</div>
      </div>
    </header>

    <main class="card" role="main" aria-label="Main content">
      <section class="section">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <strong style="font-size:16px">What this page does</strong>
            <div class="muted">It maps the cycle: trigger → craving → action → payoff → rationalization. You will read text that anticipates your thoughts. This is not shaming; it’s aiming to mirror your pattern so insight can happen.</div>
          </div>
          <div style="text-align:right">
            <div class="small">Choose tone slices (mix freely)</div>
            <div class="controls" style="justify-content:flex-end">
              <button class="tone-pill active" data-tone="hard" id="toneHard">Hard Truth</button>
              <button class="tone-pill active" data-tone="clinical" id="toneClinical">Clinical</button>
              <button class="tone-pill active" data-tone="meta" id="toneMeta">Meta-Humor</button>
            </div>
          </div>
        </div>
      </section>

      <section class="section split" aria-hidden="false">
        <div class="block">
          <strong>Stage 1 — Trigger</strong>
          <div class="muted" style="margin-top:8px">A trigger is anything that turns your attention toward printing: a Discord post, an ad for a new nozzle, boredom, stress, or the sight of an unfinished spool.</div>
          <div style="margin-top:10px" id="triggerText"></div>
        </div>

        <div class="block">
          <strong>Stage 2 — Craving</strong>
          <div class="muted" style="margin-top:8px">Craving is often emotional: relief, anticipation, or the need to be productive. The brain wants the predictable reward — the visual dopamine of a successful print.</div>
          <div style="margin-top:10px" id="craveText"></div>
        </div>
      </section>

      <section class="section split">
        <div class="block">
          <strong>Stage 3 — Action</strong>
          <div class="muted" style="margin-top:8px">Action is the purchase, the queueing of prints, or the impulse to buy filament "just in case."</div>
          <div style="margin-top:10px" id="actionText"></div>
        </div>

        <div class="block">
          <strong>Stage 4 — Payoff & Rationalization</strong>
          <div class="muted" style="margin-top:8px">Payoff is the temporary satisfaction. Rationalization is the voice that insulates the behavior from criticism.</div>
          <div style="margin-top:10px" id="payoffText"></div>
        </div>
      </section>

      <section class="section">
        <strong>Mirror: your inner voice (live)</strong>
        <div class="muted" style="margin-top:6px">This panel simulates the thoughts you’ll likely have as you read each stage. Click any line to pin and download it.</div>
        <div class="inner-voice" id="innerVoice" style="margin-top:10px;min-height:92px">— reading... pick a tone or scroll the stages to see the mirror speak.</div>

        <div style="display:flex;gap:8px;margin-top:10px">
          <button class="btn" id="pinCurrent">Pin current thought</button>
          <button class="btn-ghost" id="downloadPinned">Download pinned</button>
          <button class="btn-ghost" id="resetPinned">Clear pinned</button>
        </div>

        <div id="pinnedList" style="margin-top:10px"></div>
      </section>

      <section class="section">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <strong>Quick self-assessment — 6 questions, 60 seconds</strong>
          <div class="small">Honest answers give clarity</div>
        </div>

        <div class="quiz" style="margin-top:10px">
          <div class="q">
            <label>1) How often do you check print cams or slicer threads daily?</label>
            <select id="q1"><option value="0">Never</option><option value="1">1–3</option><option value="2">4–10</option><option value="3">Constantly</option></select>
          </div>
          <div class="q">
            <label>2) In the past 6 months, how much of your discretionary money went to printers/filament?</label>
            <select id="q2"><option value="0">None</option><option value="1">Some</option><option value="2">A lot</option><option value="3">Most/all</option></select>
          </div>
          <div class="q">
            <label>3) Do you avoid plans because you need to be home to watch prints?</label>
            <select id="q3"><option value="0">No</option><option value="1">Sometimes</option><option value="2">Often</option><option value="3">Always</option></select>
          </div>
          <div class="q">
            <label>4) Do you buy filament/upgrades impulsively when stressed or bored?</label>
            <select id="q4"><option value="0">No</option><option value="1">Sometimes</option><option value="2">Often</option><option value="3">Always</option></select>
          </div>
          <div class="q">
            <label>5) Do you hide or downplay purchases when someone asks?</label>
            <select id="q5"><option value="0">No</option><option value="1">Sometimes</option><option value="2">Often</option><option value="3">Always</option></select>
          </div>
          <div class="q">
            <label>6) When urges hit, can you delay 48 hours before buying?</label>
            <select id="q6"><option value="3">Yes — easily</option><option value="2">Yes — with effort</option><option value="1">No — it's hard</option><option value="0">No — impossible</option></select>
          </div>

          <div style="display:flex;gap:8px;margin-top:10px">
            <button class="btn" id="scoreBtn">Get my score & insight</button>
            <button class="btn-ghost" id="resetQuiz">Reset</button>
          </div>

          <div id="quizResult" class="score" style="display:none"></div>
        </div>
      </section>

      <section class="section">
        <strong>If this lands hard — simple next steps</strong>
        <div class="muted" style="margin-top:8px">This is not therapy. These are evidence-friendly practical moves that reduce impulsive behavior while keeping the hobby alive.</div>
        <div class="plan" style="margin-top:10px">
          <ol style="margin:0 0 0 18px;">
            <li>Inventory: Photograph and total printers, spools, upgrades.</li>
            <li>30-day pause: no purchases. Put desired items on a wishlist for 30 days.</li>
            <li>Delay purchase rule: 48–72 hours — if urge passes, don't buy.</li>
            <li>Accountability: share the plan with 1 trusted person.</li>
            <li>Replace: schedule one non-print social activity weekly.</li>
            <li>Track wins: log urges and what helped resist them.</li>
          </ol>
          <div style="margin-top:10px;display:flex;gap:8px">
            <button class="btn" id="downloadPlan">Download 7-day plan</button>
            <button class="btn-ghost" id="copyPlan">Copy plan</button>
          </div>
        </div>
      </section>

    </main>

    <aside class="card sticky" aria-label="Sidebar">
      <div class="block" style="margin-bottom:12px">
        <strong>Why this works (short)</strong>
        <div class="muted" style="margin-top:8px">Insight + prediction breaks defensiveness. When the message says what they were already thinking — including the excuses — the brain can step out of the loop and choose differently.</div>
      </div>

      <div class="block" style="margin-bottom:12px">
        <strong>Quick tools</strong>
        <div class="help-list" style="margin-top:8px">
          <div class="help-item"><strong>Pause purchase</strong><div class="muted">Add a 48-hour delay before buying.</div></div>
          <div class="help-item"><strong>Unsubscribe</strong><div class="muted">Mute shopping channels and push notifications from suppliers for 30 days.</div></div>
          <div class="help-item"><strong>Sell or Donate</strong><div class="muted">Pick 3 items to sell or give away this week.</div></div>
        </div>
      </div>

      <div class="block">
        <strong>Terms to lower defenses</strong>
        <div style="margin-top:8px;display:flex;flex-wrap:wrap;gap:6px">
          <span class="small">Cura</span><span class="small">G-code</span><span class="small">BLTouch</span><span class="small">TPU</span>
          <span class="small">Retraction</span><span class="small">OctoPrint</span><span class="small">Slicer profile</span>
        </div>
      </div>
    </aside>

    <footer>
      <div class="muted">This page is an intervention aid. If spending or relationships are harmed, talk to a professional.</div>
      <div class="muted">Offline • Single file</div>
    </footer>
  </div>

<script>
  // Tone toggles
  const tones = { hard:true, clinical:true, meta:true };
  function updateToneButtons(){
    document.querySelectorAll('.tone-pill').forEach(btn=>{
      const t = btn.dataset.tone;
      btn.classList.toggle('active', tones[t]);
    });
    renderAll(); // refresh text
  }
  document.getElementById('toneHard').addEventListener('click', ()=>{ tones.hard = !tones.hard; updateToneButtons(); });
  document.getElementById('toneClinical').addEventListener('click', ()=>{ tones.clinical = !tones.clinical; updateToneButtons(); });
  document.getElementById('toneMeta').addEventListener('click', ()=>{ tones.meta = !tones.meta; updateToneButtons(); });

  // Content fragments for each stage — each tone provides a line; we'll combine
  const fragments = {
    trigger: {
      hard: "Trigger: the ping, the new filament drop, the 'limited run' post. Stop pretending it’s harmless; it’s the bell that starts the chase.",
      clinical: "A trigger is a cue in your environment that activates the reward-seeking circuit. Visual and social cues (ads, Discord, feeds) are potent.",
      meta: "Yes, you just felt something when you scrolled. That twinge? It's your brain whispering 'buy' while you read this sentence."
    },
    crave: {
      hard: "Craving: you want the rush of watching layers stack. You want certainty and a tidy visible result. You're chasing the hit.",
      clinical: "Cravings are the motivational signpost — dopamine spikes anticipating reward, not necessarily from the product but from predicted success.",
      meta: "Thinking: 'If I get this spool or hotend, the next print will be perfect.' You already believe the upgrade will save you time/money — classic."
    },
    action: {
      hard: "Action: you buy the spool, queue the print, upgrade the bed — immediate relief. That relief is the reward the loop banked on.",
      clinical: "Action is the behavior reinforced by intermittent rewards. Small wins (a pretty print) make the sequence more persistent.",
      meta: "You can hear your wallet whispering 'for now'. Also: you imagined a shipping ETA as you read that line. That's normal; it's how the loop plans the payoff."
    },
    payoff: {
      hard: "Payoff & rationalization: 'I earned this' or 'I'll sell prints' — the brain cleans up the mess with stories so the behavior continues.",
      clinical: "Payoff is the short-term reinforcement. Rationalization allows cognitive dissonance to shrink, preserving self-image while behavior persists.",
      meta: "Thought predicted: 'I'll stop after this spool.' You won't — because that promise is made at peak craving. Recognize the pattern: promise → fail → explain."
    }
  };

  function combine(stage){
    const parts=[];
    if(tones.hard) parts.push(`<div style="margin-bottom:6px"><strong style="color:var(--accent)">Hard truth:</strong> ${fragments[stage].hard}</div>`);
    if(tones.clinical) parts.push(`<div style="margin-bottom:6px"><strong style="color:var(--accent-2)">Clinical:</strong> ${fragments[stage].clinical}</div>`);
    if(tones.meta) parts.push(`<div><strong style="color:var(--warn)">Meta:</strong> ${fragments[stage].meta}</div>`);
    return parts.join('');
  }

  function renderAll(){
    document.getElementById('triggerText').innerHTML = combine('trigger');
    document.getElementById('craveText').innerHTML   = combine('crave');
    document.getElementById('actionText').innerHTML  = combine('action');
    document.getElementById('payoffText').innerHTML  = combine('payoff');
    // Make inner-voice automatically pick a strong line from visible fragments
    updateInnerVoice();
  }

  function randomChoice(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

  // Inner voice logic: creates lines that anticipate, defend, or reflect based on current tones
  function updateInnerVoice(){
    const lines = [];
    if(tones.meta){
      lines.push("Yes — you had that exact defense ready as you scrolled: 'I'll stop after this.'");
      lines.push("You pictured a Benchy, didn't you? That image is the hook.");
    }
    if(tones.hard){
      lines.push("You're minimizing. The 'just one more' voice is loud because it's worked before.");
      lines.push("Look at the pile of unopened spools. Be honest about why they're there.");
    }
    if(tones.clinical){
      lines.push("Note: dopamine anticipates reward; it doesn't evaluate long-term cost.");
      lines.push("Intermittent reinforcement (sometimes perfect prints) makes behavior resistant to change.");
    }
    // add stage-specific nudge
    lines.push("If you resist an impulse for 48 hours it typically drops dramatically. Try it.");
    document.getElementById('innerVoice').textContent = randomChoice(lines);
  }

  // Interval subtle update to keep mirror lively
  let innerTimer = setInterval(updateInnerVoice, 6000);

  // Pinning and downloading inner thoughts
  let pinned = [];
  document.getElementById('pinCurrent').addEventListener('click', ()=>{
    const text = document.getElementById('innerVoice').textContent.trim();
    if(text && !pinned.includes(text)){ pinned.push(text); renderPinned(); }
  });
  function renderPinned(){
    const el = document.getElementById('pinnedList');
    if(pinned.length===0){ el.innerHTML=''; return; }
    el.innerHTML = '<strong>Pinned thoughts</strong><div style="margin-top:8px"></div>' + pinned.map((t,i)=>`<div style="margin-top:6px;padding:8px;background:rgba(255,255,255,0.02);border-radius:8px"><div style="font-family:ui-monospace,monospace">${escapeHtml(t)}</div><div style="margin-top:6px"><button class="btn-ghost" data-i="${i}" onclick="removePinned(${i})">remove</button></div></div>`).join('');
  }
  function removePinned(i){ pinned.splice(i,1); renderPinned(); }
  document.getElementById('downloadPinned').addEventListener('click', ()=>{
    if(pinned.length===0){ alert('No pinned thoughts'); return; }
    const blob = new Blob([pinned.join("\n\n")],{type:'text/plain'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'pinned-thoughts.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });
  document.getElementById('resetPinned').addEventListener('click', ()=>{ pinned=[]; renderPinned(); });

  // Quiz scoring (digit-by-digit safe)
  function scoreQuiz(){
    const ids=['q1','q2','q3','q4','q5','q6'];
    let s=0;
    for(const id of ids){
      const val = Number(document.getElementById(id).value);
      s += val;
    }
    return s;
  }
  function interpretScore(s){
    // score range 0..18 (since q6 reversed); compute category
    if(s <= 4) return {level:'Low', cls:'low', text:'Your answers suggest the hobby is healthy and under control. Keep balance and track time/money occasionally.'};
    if(s <= 10) return {level:'Moderate', cls:'med', text:'Enthusiastic territory. Try a 30-day no-buy and track urges to see patterns.'};
    return {level:'High', cls:'high', text:'High risk: the hobby is driving choices and money. Consider the 30-day pause, accountability, and talking to someone you trust.'};
  }
  document.getElementById('scoreBtn').addEventListener('click', ()=>{
    const s = scoreQuiz();
    const r = interpretScore(s);
    const el = document.getElementById('quizResult');
    el.style.display = 'block';
    el.className = 'score ' + r.cls;
    el.innerHTML = `<strong>Score: ${s} — ${r.level}</strong><div style="margin-top:8px" class="muted">${r.text}</div>`;
    // if high, show quick tip prompt
    if(r.level==='High'){
      setTimeout(()=>{ if(confirm("Your score is high. Would you like an immediate, short script for starting the conversation with a friend or partner?")) {
        navigator.clipboard?.writeText("I need your help. I'm spending too much time and money on 3D printing and I'm trying a 30-day pause. Can you check in with me and stop me from buying during this time?");
        alert('Short script copied to clipboard.');
      }}, 300);
    }
  });
  document.getElementById('resetQuiz').addEventListener('click', ()=>{
    ['q1','q2','q3','q4','q5','q6'].forEach(id=>document.getElementById(id).value='0');
    document.getElementById('quizResult').style.display='none';
  });

  // Plan download / copy
  const planLines = [
    "Day 1 — Inventory: Photograph all printers, spools, and accessories. List prices.",
    "Day 2 — Pause: No purchases for 30 days. Put wants on a wishlist; review after 30 days.",
    "Day 3 — Social Test: Schedule one evening where the printer is off and unreachable.",
    "Day 4 — Sell/Give: Pick 3 items to sell/donate. Put proceeds in a labeled jar.",
    "Day 5 — Delay Rule: For any urge, wait 48–72 hours. Log urge, time, trigger, outcome.",
    "Day 6 — Accountability: Tell one trusted person your plan and ask for support.",
    "Day 7 — Reflect: Review logs, hours, money. Decide next 30-day step."
  ];
  document.getElementById('downloadPlan').addEventListener('click', ()=>{
    const blob = new Blob([planLines.join("\n")],{type:'text/plain'}); const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = '7-day-plan.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });
  document.getElementById('copyPlan').addEventListener('click', async ()=>{
    try{
      await navigator.clipboard.writeText(planLines.join("\n"));
      alert('Plan copied to clipboard.');
    }catch(e){ alert('Copy failed.'); }
  });

  // Small util
  function escapeHtml(str){ return str.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

  // initial render
  renderAll();

  // accessibility: update inner voice when user toggles tones (already wired), also when user focuses
  ['triggerText','craveText','actionText','payoffText'].forEach(id=>{
    document.getElementById(id).addEventListener('mouseover', ()=>{
      // when hovering a stage, show a stage-reflective inner line
      const stage = id.replace('Text','');
      const pool = [];
      if(tones.meta) pool.push("You're already composing a reason to keep doing this.");
      if(tones.hard) pool.push("That excuse is exactly what preserves the loop.");
      if(tones.clinical) pool.push("Note: cue → craving → action → reward is automatic; awareness interrupts it.");
      document.getElementById('innerVoice').textContent = randomChoice(pool);
    });
  });

  // stop interval when page hidden
  document.addEventListener('visibilitychange', ()=>{
    if(document.hidden) clearInterval(innerTimer);
    else innerTimer = setInterval(updateInnerVoice,6000);
  });

</script>
</body>
</html>
